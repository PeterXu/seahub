(self.webpackChunkseahub_frontend=self.webpackChunkseahub_frontend||[]).push([[747],{88376:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(1413),i=n(15671),o=n(43144),a=n(60136),s=n(29388),l=n(47313),d=n(95423),c=n(72970),u=n(98624),f=n(61805),p=n(83854),h=n(51282),g=n(46417),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var o;return(0,i.Z)(this,n),(o=t.call(this,e)).onLinkClick=function(e){o.props.onLinkClick(e)},o.changeInlineNode=function(e){var t,n,r=o.props.repoID;if("image"==e.type){if(t=e.data.src,new RegExp(f.xx+"/lib/"+r+"/file.*raw=1").test(t)){var i=t.indexOf("/file"),a=t.indexOf("?");n=t.substring(i+5,a)}else{if(!/^\.\.\/*/.test(t)&&!/^\.\/*/.test(t))return;var s=o.props.path,l=s.slice(0,s.lastIndexOf("/"))+"/"+t;n=p.c.pathNormalize(l)}e.data.src=f.xx+"/view-image-via-public-wiki/?slug="+f.oF+"&path="+n}else if("link"==e.type)if(t=e.url,p.c.isInternalFileLink(t,r))if(p.c.isInternalMarkdownLink(t,r)){var d=p.c.getPathFromInternalMarkdownLink(t,r);e.url=f.xx+"/published/"+f.oF+d}else e.url=t.replace(/(.*)lib\/([-0-9a-f]{36})\/file(.*)/g,(function(e,t,n,r){return"".concat(t,"d/").concat(f.lI,"/files/?p=").concat(r,"&dl=1")}));else if(p.c.isInternalDirLink(t,r)){var c=p.c.getPathFromInternalDirLink(t,r);e.url=f.xx+"/published/"+f.oF+c}return e},o.modifyValueBeforeRender=function(e){return p.c.changeMarkdownNodes(e,o.changeInlineNode)},o.renderMarkdown=function(){var e=o.props,t=e.isTOCShow,n=void 0===t||t,i=e.isWiki,a=e.markdownContent,s=(0,r.Z)({isShowOutline:n,mathJaxSource:"".concat(f.si,"js/mathjax/tex-svg.js"),value:a,scrollRef:o.scrollRef,onLinkClick:o.onLinkClick},i&&{beforeRenderCallback:o.modifyValueBeforeRender});return(0,g.jsx)(c.I18nextProvider,{i18n:u.Z,children:(0,g.jsx)(l.Suspense,{fallback:(0,g.jsx)(h.Z,{}),children:(0,g.jsx)(d.MarkdownViewer,(0,r.Z)({},s))})})},o.scrollRef=l.createRef(),o}return(0,o.Z)(n,[{key:"render",value:function(){if(this.props.isFileLoading)return(0,g.jsx)(h.Z,{});var e=this.props,t=e.isWiki,n=e.containerClassName,r="wiki-page-container ".concat(void 0===n?"":n),i="wiki-page-content ".concat(t?"":NaN);return(0,g.jsx)("div",{ref:this.scrollRef,className:r,children:(0,g.jsxs)("div",{className:i,children:[this.props.children,this.renderMarkdown(),(0,g.jsxs)("p",{id:"wiki-page-last-modified",children:[(0,f.ih)("Last modified by")," ",this.props.latestContributor,", ",(0,g.jsx)("span",{children:this.props.lastModified})]})]})})}}]),n}(l.Component);v.defaultProps={isWiki:!1};var m=v},12314:function(e,t,n){"use strict";var r=n(47313),i=n(1168),o=n(15671),a=n(43144),s=n(60136),l=n(29388),d=n(70816),c=n.n(d),u=n(66367),f=n.n(u),p=n(42995),h=n(83854),g=n(11621),v=n(35662),m=n(74521),y=n.n(m),w=n(61805),b=function(){function e(){(0,o.Z)(this,e)}return(0,a.Z)(e,[{key:"init",value:function(e){var t=e.server,n=e.username,r=e.password,i=e.token;return this.server=t,this.username=n,this.password=r,this.token=i,this.token&&this.server&&(this.req=v.Z.create({baseURL:this.server,headers:{Authorization:"Token "+this.token}})),this}},{key:"initForSeahubUsage",value:function(e){var t=e.siteRoot,n=e.xcsrfHeaders;if(t&&"/"===t.charAt(t.length-1)){var r=t.substring(0,t.length-1);this.server=r}else this.server=t;return this.req=v.Z.create({headers:{"X-CSRFToken":n}}),this}},{key:"_sendPostRequest",value:function(e,t){return t.getHeaders?this.req.post(e,t,{headers:t.getHeaders()}):this.req.post(e,t)}},{key:"listWikiDir",value:function(e,t,n){var r=encodeURIComponent(t),i=this.server+"/api/v2.1/wikis/"+encodeURIComponent(e)+"/dir/?p="+r;return n&&(i=this.server+"/api/v2.1/wikis/"+encodeURIComponent(e)+"/dir/?p="+r+"&with_parents="+n),this.req.get(i)}},{key:"getWikiFileContent",value:function(e,t){var n=encodeURIComponent(t),r=(new Date).getTime(),i=this.server+"/api/v2.1/wikis/"+encodeURIComponent(e)+"/content/?p="+n+"&_="+r;return this.req.get(i)}},{key:"listWikis",value:function(e){var t=this.server+"/api/v2.1/wikis/";return e?this.req.get(t,{params:e,paramsSerializer:{serialize:function(e){var t=[];for(var n in e)if(Array.isArray(e[n]))for(var r=0,i=e[n].length;r<i;r++)t.push(n+"="+encodeURIComponent(e[n][r]));else t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}}}):this.req.get(t)}},{key:"addWiki",value:function(e){var t=this.server+"/api/v2.1/wikis/",n=new(y());return n.append("repo_id",e),this._sendPostRequest(t,n)}},{key:"renameWiki",value:function(e,t){var n=this.server+"/api/v2.1/wikis/"+e+"/",r=new(y());return r.append("wiki_name",t),this._sendPostRequest(n,r)}},{key:"updateWikiPermission",value:function(e,t){var n=this.server+"/api/v2.1/wikis/"+e+"/",r={permission:t};return this.req.put(n,r)}},{key:"deleteWiki",value:function(e){var t=this.server+"/api/v2.1/wikis/"+e+"/";return this.req.delete(t)}},{key:"updateWikiConfig",value:function(e,t){var n=this.server+"/api/v2.1/wiki-config/"+e+"/",r={wiki_config:t};return this.req.put(n,r)}},{key:"getWikiConfig",value:function(e){var t=this.server+"/api/v2.1/wiki-config/"+e+"/";return this.req.get(t)}}]),e}(),x=new b,D=g.ZP.load("sfcsrftoken");x.initForSeahubUsage({siteRoot:w.ze,xcsrfHeaders:D});var k=x,C=n(55668),S=(0,a.Z)((function e(t){(0,o.Z)(this,e),this.version=t.version||1,this.wiki_name=t.wiki_name||"",this.wiki_icon=t.wiki_icon||"",this.navigation=t.navigation||[],this.pages=t.pages||[]})),I=n(70609),j=n(47809),N=n(68396),O=n(1413),P=n(74165),_=n(15861),T=n(97326),E=n(32773),F=n.n(E),M=n(51282),Z=n(46123),R=n.n(Z),L=n(57124),A=n(47584),V=n(96552),B=(0,A.Z5)(V.ZP),W="view-folder",U="view",H=n(13380),G=n(25417),z=n(72611),q=n(15108),J=n(46417),X=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).onDropdownToggle=function(e){e.stopPropagation();var t=!r.state.isMenuShow;r.props.changeItemFreeze(t),r.setState({isMenuShow:t})},r.openFolderEditor=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.openFolderEditor()},r.onDeleteFolder=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.onDeleteFolder(r.props.folderId)},r.closeTip=function(){r.setState({showTip:!1})},r.state={isMenuShow:!1,showTip:!1},r.position={},r}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsx)(J.Fragment,{children:(0,J.jsxs)(H.Z,{isOpen:this.state.isMenuShow,toggle:this.onDropdownToggle,className:"more-view-folder-operation",children:[(0,J.jsx)(G.Z,{tag:"span","data-toggle":"dropdown","aria-expanded":this.state.isMenuShow,children:(0,J.jsx)(q.Z,{symbol:"more-level"})}),(0,J.jsxs)(z.Z,{className:"dtable-dropdown-menu large",flip:!1,modifiers:{preventOverflow:{boundariesElement:document.body}},positionFixed:!0,style:{zIndex:1051},children:[(0,J.jsxs)(L.Z,{onClick:this.props.onToggleAddView.bind(this,this.props.folderId),children:[(0,J.jsx)(q.Z,{symbol:"main-view"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Add page")})]}),(0,J.jsxs)(L.Z,{onClick:this.openFolderEditor,children:[(0,J.jsx)(q.Z,{symbol:"edit"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Modify name")})]}),(0,J.jsxs)(L.Z,{onMouseDown:this.onDeleteFolder,children:[(0,J.jsx)(q.Z,{symbol:"delete"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Delete folder")})]})]})]})})}}]),n}(r.Component),Y=n(27205),K=n(30560),Q=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).onChangeName=function(e){var t=e.target.value;i.props.onChangeName(t)},i.onEnter=function(e){e.preventDefault(),i.props.toggleViewEditor()},i.renderViewName=function(){var e=i.props.viewName;return(0,J.jsx)("div",{className:"view-name-editor",children:(0,J.jsx)("input",{type:"text",className:"form-control view-name-editor-input",value:e,onChange:i.onChangeName,autoFocus:!0,ref:i.viewInputRef})})},i.viewInputRef=r.createRef(),i}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.viewName.length;this.viewInputRef.current.setSelectionRange(0,e)}},{key:"render",value:function(){return(0,J.jsxs)(K.Z,{placement:"bottom-end",target:this.props.viewEditorId,hideSeahubPopover:this.props.toggleViewEditor,hideSeahubPopoverWithEsc:this.props.toggleViewEditor,onEnter:this.onEnter,hideArrow:!0,popoverClassName:"view-edit-popover",children:[(0,J.jsx)("div",{className:"view-edit-popover-header",children:(0,J.jsx)("span",{className:"header-text",children:(0,w.ih)("Modify Name")})}),(0,J.jsx)(Y.Z,{className:"view-edit-content",children:this.renderViewName()})]})}}]),n}(r.Component),$=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).calculateNameMap=function(){return r.props.views.reduce((function(e,t){return e[t.name]=!0,e}),{})},r.onDropdownToggle=function(e){e.target&&r.foldersDropdownToggle&&r.foldersDropdownToggle.contains(e.target)||(e.stopPropagation(),r.props.toggle())},r.onRenameView=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.toggleViewEditor()},r.onDeleteView=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.onDeleteView()},r.onModifyViewType=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.onModifyViewType()},r.onMoveViewToFolder=function(e){r.props.onMoveViewToFolder(e)},r.onRemoveFromFolder=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.onMoveViewToFolder(null)},r.onToggleFoldersMenu=function(){r.setState({isShowMenu:!r.state.isShowMenu})},r.duplicatePage=function(){for(var e=r.props,t=e.view,n=e.folderId,i=t.id,o=t.name,a=1,s=o+"(copy)";r.pageNameMap[s];)s="".concat(o,"(copy").concat(a,")"),a++;r.props.onSetFolderId(n),r.props.duplicatePage({name:s,from_page_id:i},(function(){}),r.duplicatePageFailure)},r.duplicatePageFailure=function(){N.Z.danger((0,w.ih)("Failed_to_duplicate_page"))},r.showMenu=function(){r.setState({isShowMenu:!0})},r.hideMenu=function(){r.setState({isShowMenu:!1})},r.state={isShowMenu:!1},r.pageNameMap=r.calculateNameMap(),r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.folderId,r=t.canDelete,i=t.canDuplicate,o=t.renderFolderMenuItems,a=t.tableGridsLength,s=t.isOnlyOneView,l=o&&o({currentFolderId:n,onMoveViewToFolder:this.onMoveViewToFolder});return(0,J.jsxs)(H.Z,{isOpen:!0,toggle:this.onDropdownToggle,className:"view-operation-dropdown",children:[(0,J.jsx)(G.Z,{className:"view-operation-dropdown-toggle",tag:"span","data-toggle":"dropdown"}),(0,J.jsxs)(z.Z,{className:"view-operation-dropdown-menu dtable-dropdown-menu large",flip:!1,modifiers:{preventOverflow:{boundariesElement:document.body}},positionFixed:!0,style:{zIndex:1051},children:[(0,J.jsxs)(L.Z,{onClick:this.onRenameView,children:[(0,J.jsx)(q.Z,{symbol:"edit"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Modify name")})]}),i&&(0,J.jsxs)(L.Z,{onClick:this.duplicatePage,children:[(0,J.jsx)(q.Z,{symbol:"copy"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Duplicate page")})]}),s||1===a||!r?"":(0,J.jsxs)(L.Z,{onClick:this.onDeleteView,children:[(0,J.jsx)(q.Z,{symbol:"delete"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Delete page")})]}),n&&(0,J.jsxs)(L.Z,{onClick:this.onRemoveFromFolder,children:[(0,J.jsx)(q.Z,{symbol:"remove-from-folder"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Remove from folder")})]}),o&&l.length>0&&(0,J.jsx)(L.Z,{className:"pr-2 btn-move-to-folder",tag:"div",onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.showMenu()},onMouseEnter:this.showMenu,onMouseLeave:this.hideMenu,children:(0,J.jsxs)(H.Z,{className:"folders-dropdown",direction:"right",isOpen:this.state.isShowMenu,toggle:this.onToggleFoldersMenu,children:[(0,J.jsxs)("div",{className:"folders-dropdown-toggle",ref:function(t){return e.foldersDropdownToggle=t},children:[(0,J.jsx)(q.Z,{symbol:"move-to"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Move to")}),(0,J.jsx)("span",{className:"icon-dropdown-toggle",children:(0,J.jsx)(q.Z,{className:"mr-0",symbol:"right-slide"})}),(0,J.jsx)(G.Z,{className:"move-to-folders-toggle"})]}),this.state.isShowMenu&&(0,J.jsx)(z.Z,{className:"folders-dropdown-menu",flip:!1,modifiers:{preventOverflow:{boundariesElement:document.body}},positionFixed:!0,children:l})]})})]})]})}}]),n}(r.Component),ee=n(12756),te=n(12213),ne=n(7764),re=n(21303),ie=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).toggle=function(){e.props.closeDeleteDialog()},e}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsxs)(p.Z,{isOpen:!0,toggle:this.toggle,children:[(0,J.jsx)(ee.Z,{toggle:this.toggle,children:(0,w.ih)("Delete page")}),(0,J.jsx)(te.Z,{children:(0,J.jsx)("p",{children:(0,w.ih)("Are you sure to delete this page?")})}),(0,J.jsxs)(ne.Z,{children:[(0,J.jsx)(re.Z,{color:"secondary",onClick:this.toggle,children:(0,w.ih)("Cancel")}),(0,J.jsx)(re.Z,{color:"primary",onClick:this.props.handleSubmit,children:(0,w.ih)("Delete")})]})]})}}]),n}(r.Component),oe={beginDrag:function(e){return{idx:e.viewIndex,data:(0,O.Z)((0,O.Z)({},e.view),{},{index:e.viewIndex}),folderId:e.folderId,mode:U}},endDrag:function(e,t){var n=t.getItem();if(!t.didDrop())return{viewSource:n,viewTarget:{}}},isDragging:function(e){var t=e.draggedRow,n=e.infolder,r=e.viewIndex;return!n&&t.idx>r}},ae={drop:function(e,t){var n=t.getItem();if(n.mode!==U)if(n.mode!==W);else{var r=e.viewIndex,i=e.view,o=n.data.id,a=i.id,s=n.idx;if(e.foldersStr.split("-").includes(o))return;e.onMoveFolder(o,a,s>r?"move_above":"move_below")}else{var l=e.infolder,d=e.viewIndex,c=e.view,u=e.folderId,f=n.folderId,p=n.data.id,h=c.id;if(p!==h){var g,v=n.idx;g=l?"move_below":v>d?"move_above":"move_below",e.onMoveView({moved_view_id:p,target_view_id:h,source_view_folder_id:f,target_view_folder_id:u,move_position:g})}}}},se=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).onMouseEnter=function(){i.state.isSelected},i.onMouseLeave=function(){i.state.isSelected},i.onCurrentPageChanged=function(e){var t=i.state.isSelected;e===i.props.view.id&&!1===t?i.setState({isSelected:!0}):e!==i.props.view.id&&!0===t&&i.setState({isSelected:!1})},i.toggleViewEditor=function(e){e&&e.stopPropagation(),i.setState({isShowViewEditor:!i.state.isShowViewEditor},(function(){i.state.isShowViewEditor||i.saveViewProperties()}))},i.saveViewProperties=function(){var e=i.props.view,t=e.name,n=e.icon,r=e.id,o=i.state.viewIcon,a=i.state.viewName.trim();if(o!==n||a!==t){var s={};a!==t&&(s.name=a),o!==n&&(s.icon=o),i.props.onUpdatePage(r,s)}},i.onChangeName=function(e){i.setState({viewName:e})},i.onChangeIcon=function(e){i.setState({viewIcon:e})},i.openDeleteDialog=function(){i.setState({isShowDeleteDialog:!0})},i.closeDeleteDialog=function(){i.setState({isShowDeleteDialog:!1})},i.onViewOperationDropdownToggle=function(){var e=!i.state.isShowViewOperationDropdown;i.setState({isShowViewOperationDropdown:e}),i.changeItemFreeze(e)},i.changeItemFreeze=function(e){e?i.viewItemRef.classList.add("view-freezed"):i.viewItemRef.classList.remove("view-freezed")},i.renderIcon=function(e){return e?e.includes("dtable-icon")?(0,J.jsx)("span",{className:"mr-2 dtable-font ".concat(e)}):(0,J.jsx)(q.Z,{className:"mr-2",symbol:e}):null},i.state={isShowViewEditor:!1,isShowViewOperationDropdown:!1,isShowDeleteDialog:!1,viewName:e.view.name||"",viewIcon:e.view.icon,isSelected:e.currentPageId===e.view.id},i.viewItemRef=r.createRef(),i}return(0,a.Z)(n,[{key:"render",value:function(){var e,t,n=this,r=this.props,i=r.connectDragSource,o=r.connectDragPreview,a=r.connectDropTarget,s=r.isOver,l=r.canDrop,d=r.isDragging,c=r.infolder,u=r.view,f=r.tableGridsLength,p=r.isEditMode,h=r.folderId,g=r.isOnlyOneView,v=r.foldersStr,m=this.state,y=m.isShowViewEditor,w=m.viewName,b=m.viewIcon,x=m.isSelected,D=s&&l;c?(e=!1,t=D):(e=D&&d,t=D&&!d);var k="view-editor-".concat(u.id);return a(o((0,J.jsxs)("div",{className:R()("view-item","view",{"selected-view":x},{"view-can-drop-top":e},{"view-can-drop":t},{readonly:!p}),ref:function(e){return n.viewItemRef=e},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,id:k,children:[(0,J.jsxs)("div",{className:"view-item-main",onClick:y?function(){}:this.props.onSelectView,children:[p?i((0,J.jsx)("div",{className:"rdg-drag-handle",children:(0,J.jsx)(q.Z,{symbol:"drag"})})):(0,J.jsx)("div",{className:"rdg-drag-handle"}),(0,J.jsxs)("div",{className:"view-content",style:v?{marginLeft:"".concat(24*v.split("-").length,"px")}:{},children:[this.renderIcon(u.icon),(0,J.jsx)("span",{className:"view-title text-truncate",title:u.name,children:u.name}),y&&(0,J.jsx)(Q,{viewName:w,viewIcon:b,viewEditorId:k,onChangeName:this.onChangeName,onChangeIcon:this.onChangeIcon,toggleViewEditor:this.toggleViewEditor})]})]}),(0,J.jsx)("div",{className:"d-flex",children:p&&(0,J.jsxs)("div",{className:"more-view-operation",onClick:this.onViewOperationDropdownToggle,children:[(0,J.jsx)(q.Z,{symbol:"more-level"}),this.state.isShowViewOperationDropdown&&(0,J.jsx)($,{view:u,views:this.props.views,tableGridsLength:f,isOnlyOneView:g,folderId:h,canDelete:!0,canDuplicate:!0,toggle:this.onViewOperationDropdownToggle,renderFolderMenuItems:this.props.renderFolderMenuItems,toggleViewEditor:this.toggleViewEditor,duplicatePage:this.props.duplicatePage,onSetFolderId:this.props.onSetFolderId,onDeleteView:this.openDeleteDialog,onMoveViewToFolder:this.props.onMoveViewToFolder})]})}),this.state.isShowDeleteDialog&&(0,J.jsx)(ie,{closeDeleteDialog:this.closeDeleteDialog,handleSubmit:this.props.onDeleteView})]})))}}]),n}(r.Component),le=(0,A.GR)("ViewStructure",ae,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),draggedRow:t.getItem()}}))((0,A.Ej)("ViewStructure",oe,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(se)),de=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;(0,o.Z)(this,n),(r=t.call(this,e)).onToggleExpandFolder=function(e){e.nativeEvent.stopImmediatePropagation(),r.props.onToggleExpandFolder(r.props.folder.id),r.forceUpdate()},r.onToggleExpandSubfolder=function(e){r.props.onToggleExpandFolder(e),r.forceUpdate()},r.onClickFolderChildren=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},r.openFolderEditor=function(){r.setState({isEditing:!0})},r.closeFolderEditor=function(){if(r.state.isEditing){var e=r.state,t=e.name,n=e.icon;r.props.onModifyFolder(r.props.folder.id,{name:t,icon:n}),r.setState({isEditing:!1})}},r.onChangeName=function(e){r.setState({name:e})},r.onChangeIcon=function(e){r.setState({icon:e})},r.changeItemFreeze=function(e){r.isFreeze=!0},r.renderFolder=function(e,t,n,i,o){var a=r.props,s=a.isEditMode,l=a.views,d=a.foldersStr,c=e.id;return(0,J.jsx)(fe,{isEditMode:s,folder:e,folderIndex:t,tableGridsLength:n,isOnlyOneView:i,id_view_map:o,renderFolderMenuItems:r.props.renderFolderMenuItems,onToggleExpandFolder:r.onToggleExpandSubfolder,onToggleAddView:r.props.onToggleAddView,onModifyFolder:r.props.onModifyFolder,onDeleteFolder:r.props.onDeleteFolder,onMoveFolder:r.props.onMoveFolder,onSelectView:r.props.onSelectView,onUpdatePage:r.props.onUpdatePage,duplicatePage:r.props.duplicatePage,onSetFolderId:r.props.onSetFolderId,onDeleteView:r.props.onDeleteView,onMoveViewToFolder:r.props.onMoveViewToFolder,onMoveView:r.props.onMoveView,moveFolderToFolder:r.props.moveFolderToFolder,views:l,foldersStr:d+"-"+c,setClassName:r.props.setClassName,getClassName:r.props.getClassName,movePageOut:r.props.movePageOut,layerDragProps:r.props.layerDragProps,getFolderState:r.props.getFolderState,currentPageId:r.props.currentPageId},"view-folder-".concat(c))},r.renderView=function(e,t,n,i){var o=r.props,a=o.isEditMode,s=o.views,l=o.folder,d=o.foldersStr,c=e.id;if(s.find((function(e){return e.id===c})))return(0,J.jsx)(le,{tableGridsLength:n,isOnlyOneView:i,infolder:!1,view:s.find((function(e){return e.id===c})),viewIndex:t,folderId:l.id,isEditMode:a,renderFolderMenuItems:r.props.renderFolderMenuItems,duplicatePage:r.props.duplicatePage,onSetFolderId:r.props.onSetFolderId,onSelectView:function(){return r.props.onSelectView(c)},onUpdatePage:r.props.onUpdatePage,onDeleteView:r.props.onDeleteView.bind((0,T.Z)(r),c),onMoveViewToFolder:function(t){r.props.onMoveViewToFolder(l.id,e.id,t)},onMoveView:r.props.onMoveView,onMoveFolder:r.props.onMoveFolder,views:s,foldersStr:d,currentPageId:r.props.currentPageId},c)},r.getFolderClassName=function(e,t){if(!t||!e||!e.clientOffset)return"view-folder-wrapper";var n=e.clientOffset.y,i=r.foldWrapprRef.getBoundingClientRect().y,o="";return i+10<n&&n<i+30&&(o+=" dragged-view-over "),i+10>n&&(o+=" can-drop-top "),i+30<n&&(o+=" can-drop "),r.props.setClassName(o),o+"view-folder-wrapper"},r.getFolderChildrenHeight=function(){var e=r.props.folder,t=e.id,n=e.children;if(r.props.getFolderState(t))return 0;var i=0;return n.forEach((function(e){var t=e.type,n=e.id,o=e.children;i+="folder"===t?r.props.getFolderState(n)||!Array.isArray(o)?40:40*(o.length+1):40})),i};var i=e.folder,a=i.name,s=i.icon;return r.state={isEditing:!1,icon:s||"",name:a||""},r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.connectDropTarget,r=t.connectDragPreview,i=t.connectDragSource,o=t.isOver,a=t.canDrop,s=t.isEditMode,l=t.folder,d=t.tableGridsLength,c=t.id_view_map,u=t.isOnlyOneView,f=t.layerDragProps,p=this.state.isEditing,h=l.id,g=l.name,v=l.children,m=l.icon,y=this.props.getFolderState(h),w="folder-item-".concat(h);return(0,J.jsxs)("div",{className:R()("view-folder",{readonly:!s}),ref:function(t){return e.foldRef=t},onClick:this.onToggleExpandFolder,children:[n(r((0,J.jsxs)("div",{className:this.getFolderClassName(f,o&&a),ref:function(t){return e.foldWrapprRef=t},children:[(0,J.jsxs)("div",{className:"folder-main",children:[s?i((0,J.jsx)("div",{className:"rdg-drag-handle",children:(0,J.jsx)(q.Z,{symbol:"drag"})})):(0,J.jsx)("div",{className:"rdg-drag-handle"}),(0,J.jsxs)("div",{className:"folder-content",style:{marginLeft:"".concat(16*(this.props.foldersStr.split("-").length-1),"px")},id:w,children:[m&&(0,J.jsx)("svg",{className:"mr-2 svg-item",children:(0,J.jsx)("use",{xlinkHref:"#".concat(m)})}),(0,J.jsx)("span",{className:"folder-name text-truncate",title:g,children:g}),p&&(0,J.jsx)(Q,{viewName:this.state.name,viewEditorId:w,viewIcon:this.state.icon,onChangeName:this.onChangeName,onChangeIcon:this.onChangeIcon,toggleViewEditor:this.closeFolderEditor})]})]}),s&&(0,J.jsx)(X,{changeItemFreeze:this.changeItemFreeze,openFolderEditor:this.openFolderEditor,onDeleteFolder:this.props.onDeleteFolder,onToggleAddView:this.props.onToggleAddView,folderId:h}),(0,J.jsx)(q.Z,{className:"icon-expand-folder",symbol:y?"left-slide":"drop-down"})]}))),(0,J.jsx)("div",{className:"view-folder-children",style:{height:this.getFolderChildrenHeight()},onClick:this.onClickFolderChildren,children:!y&&v&&v.map((function(t,n){return"folder"===t.type?e.renderFolder(t,n,d,u,c):e.renderView(t,n,d,u)}))})]})}}]),n}(r.Component),ce={beginDrag:function(e,t){return{idx:e.folderIndex,data:e.folder,mode:W}},endDrag:function(e,t){var n=t.getItem();if(!t.didDrop())return{sourceRow:n,targetRow:{}}},isDragging:function(e,t){var n=e.folderIndex;return e.draggedRow.idx>n}},ue={drop:function(e,t){var n=t.getItem(),r=e.folder.id,i=e.getClassName();if(i){var o;i.includes("can-drop")&&(o="move_below"),i.includes("can-drop-top")&&(o="move_above");var a=i.includes("dragged-view-over");if(n.mode===U){var s=n.folderId,l=n.data.id;return a?void e.onMoveView({moved_view_id:l,target_view_id:null,source_view_folder_id:s,target_view_folder_id:r,move_position:o}):void e.movePageOut(l,s,r,o)}if(n.mode!==W);else{var d=n.data.id;if(r===d)return;if(a)return;e.onMoveFolder(d,r,o)}}}},fe=(0,A.GR)("ViewStructure",ue,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),draggedRow:t.getItem(),connect:e,monitor:t}}))((0,A.Ej)("ViewStructure",ce,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(de)),pe=n(16708),he=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).toggle=function(t){e.onStopPropagation(t),e.props.onToggleAddViewDropdown()},e.onToggleAddView=function(t){e.onStopPropagation(t),e.props.onToggleAddView()},e.onToggleAddFolder=function(t){e.onStopPropagation(t),e.props.onToggleAddFolder()},e.onStopPropagation=function(e){e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()},e}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsxs)(H.Z,{isOpen:!0,toggle:this.toggle,children:[(0,J.jsx)(G.Z,{caret:!0}),(0,J.jsxs)(z.Z,{container:"body",className:"dtable-dropdown-menu large add-view-dropdown-menu",style:{zIndex:1061},children:[(0,J.jsxs)(L.Z,{onClick:this.onToggleAddView,children:[(0,J.jsx)(q.Z,{symbol:"main-view"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Add page")})]}),(0,J.jsxs)(L.Z,{onClick:this.onToggleAddFolder,children:[(0,J.jsx)(q.Z,{symbol:"folders"}),(0,J.jsx)("span",{className:"item-text",children:(0,w.ih)("Add folder")})]})]})]})}}]),n}(r.Component),ge=he,ve=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).onMouseEnter=function(){r.setState({isAddToolHover:!0})},r.onMouseLeave=function(){r.setState({isAddToolHover:!1})},r.onToggleAddViewDropdown=function(e){e&&e.stopPropagation(),r.setState({isShowAddViewDropdownMenu:!r.state.isShowAddViewDropdownMenu})},r.state={isShowAddViewDropdownMenu:!1,isAddToolHover:!1},r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this;return(0,J.jsx)("div",{className:"view-structure-footer",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:function(t){return e.viewFooterRef=t},children:(0,J.jsxs)("div",{className:"add-view-wrapper",children:[(0,J.jsx)(pe.Z,{className:"add-view-btn",callBack:this.onToggleAddViewDropdown,footerName:(0,w.ih)("Add page or folder")}),this.state.isShowAddViewDropdownMenu&&(0,J.jsx)(ge,{onToggleAddViewDropdown:this.onToggleAddViewDropdown,onToggleAddView:this.props.onToggleAddView,onToggleAddFolder:this.props.onToggleAddFolder})]})})}}]),n}(r.Component),me=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).getFoldedFoldersFromBase=function(){var e=window.localStorage.getItem("wiki-folded-folders-".concat(w.Jv));return e?JSON.parse(e):{}},i.setFoldedFolders=function(e){window.localStorage.setItem("wiki-folded-folders-".concat(w.Jv),JSON.stringify(e))},i.getFolderState=function(e){return i.idFoldedStatusMap[e]},i.onToggleExpandFolder=function(e){var t=i.getFoldedFoldersFromBase();t[e]?delete t[e]:t[e]=!0,i.setFoldedFolders(t),i.idFoldedStatusMap=t},i.onToggleAddView=function(e){i.props.onToggleAddView(e)},i.onMoveViewToFolder=function(e,t,n){i.props.onMoveView({moved_view_id:t,source_view_folder_id:e,target_view_folder_id:n,target_view_id:null,move_position:"move_below"})},i.renderFolderMenuItems=function(e){var t=e.currentFolderId,n=e.onMoveViewToFolder;return i.props.navigation.filter((function(e){return"folder"===e.type&&e.id!==t})).map((function(e){var t=e.id,r=e.name;return(0,J.jsx)(L.Z,{onClick:n.bind((0,T.Z)(i),t),children:(0,J.jsx)("span",{className:"folder-name text-truncate",title:r,children:r})},"move-to-folder-".concat(t))}))},i.setClassName=function(e){i.folderClassNameCache=e},i.getClassName=function(){return i.folderClassNameCache},i.renderFolder=function(e,t,n,r,o,a){var s=i.props,l=s.isEditMode,d=s.views,c=e.id;return(0,J.jsx)(fe,{isEditMode:l,folder:e,folderIndex:t,tableGridsLength:n,isOnlyOneView:r,id_view_map:o,renderFolderMenuItems:i.renderFolderMenuItems,onToggleExpandFolder:i.onToggleExpandFolder,onToggleAddView:i.props.onToggleAddView,onDeleteFolder:i.props.onDeleteFolder,onMoveFolder:i.props.onMoveFolder,onSelectView:i.props.onSelectView,onUpdatePage:i.props.onUpdatePage,duplicatePage:i.props.duplicatePage,onSetFolderId:i.props.onSetFolderId,onDeleteView:i.props.onDeleteView,onMoveViewToFolder:i.onMoveViewToFolder,onMoveView:i.props.onMoveView,views:d,moveFolderToFolder:i.props.moveFolderToFolder,foldersStr:c,layerDragProps:a,setClassName:i.setClassName,getClassName:i.getClassName,movePageOut:i.props.movePageOut,onModifyFolder:i.props.onModifyFolder,getFolderState:i.getFolderState,currentPageId:i.props.currentPageId},"view-folder-".concat(c))},i.renderView=function(e,t,n,r,o){var a=i.props,s=a.isEditMode,l=a.views,d=e.id;if(l.find((function(e){return e.id===d}))){return(0,J.jsx)(le,{tableGridsLength:n,isOnlyOneView:r,infolder:!1,view:l.find((function(e){return e.id===d})),views:l,viewIndex:t,folderId:null,isEditMode:s,renderFolderMenuItems:i.renderFolderMenuItems,duplicatePage:i.props.duplicatePage,onSetFolderId:i.props.onSetFolderId,onSelectView:function(){return i.props.onSelectView(d)},onUpdatePage:i.props.onUpdatePage,onDeleteView:i.props.onDeleteView.bind((0,T.Z)(i),d),onMoveViewToFolder:function(t){i.onMoveViewToFolder(null,e.id,t)},onMoveView:i.props.onMoveView,onMoveFolder:i.props.onMoveFolder,foldersStr:"",currentPageId:i.props.currentPageId},d)}},i.renderStructureBody=r.forwardRef((function(e,t){var n=i.props,r=n.navigation,o=n.views,a=n.isEditMode,s=!1;1===o.length&&(s=!0);var l=o.length,d={};o.forEach((function(e){return d[e.id]=e}));var c={maxHeight:a?"calc(100% - 40px)":"100%"};return(0,J.jsx)("div",{className:"view-structure-body",style:c,children:r.map((function(t,n){return"folder"===t.type?i.renderFolder(t,n,l,s,d,e):i.renderView(t,n,l,s,d)}))})})),i.collect=function(e){return{item:e.getItem(),itemType:e.getItemType(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}},i.folderClassNameCache="",i.idFoldedStatusMap=i.getFoldedFoldersFromBase(),i}return(0,a.Z)(n,[{key:"render",value:function(){var e=B((0,A.GR)("ViewStructure",{},(function(e){return{connectDropTarget:e.dropTarget()}}))((0,A.rE)(this.collect)(this.renderStructureBody)));return(0,J.jsxs)("div",{className:R()("view-structure",{"view-structure-dark":false},{"view-structure-light":!0}),children:[(0,J.jsx)(e,{}),this.props.isEditMode&&(0,J.jsx)(ve,{onToggleAddView:this.onToggleAddView.bind(this,null),onToggleAddFolder:this.props.onToggleAddFolder})]})}}]),n}(r.Component),ye=me,we=n(95423),be=function(){function e(t){var n=t.name,r=t.href,i=t.parentNode;(0,o.Z)(this,e),this.name=n,this.href=r,this.parentNode=i||null,this.children=[]}return(0,a.Z)(e,[{key:"setParent",value:function(e){this.parentNode=e}},{key:"addChildren",value:function(e){this.children=e}}]),e}(),xe=function e(t,n){var r=t.name,i="/"===n?n+r:n+"/"+r;t.path=i,t.children.length>0&&t.children.forEach((function(t){e(t,i)}))},De=function(e){var t;if(e.children[1]&&"link"===e.children[1].type){var n=e.children[1],r=n.children[0],i=r?r.text:"";t=new be({name:i,href:n.url})}else if(e.children[0]){var o=e.children[0],a=o.text?o.text:"";t=new be({name:a,href:""})}else t=new be({name:"",href:""});return t},ke=function e(t,n){var r=t.map((function(t){if(2!==t.children.length||"unordered_list"!==t.children[1].type&&"ordered_list"!==t.children[1].type)return t.children[0]&&"paragraph"===t.children[0].type?De(t.children[0]):new be({name:"",href:""});var n=t.children[0],r=De(n),i=t.children[1];return e(i.children,r)}));return n.addChildren(r),n},Ce=function(e){var t=new be({name:"",href:""});return e.forEach((function(e){"unordered_list"!==e.type&&"ordered_list"!==e.type||(t=ke(e.children,t),xe(t,"/"))})),t},Se=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).toggleExpanded=function(){var e=r.state.expanded;r.setState({expanded:!e})},r.onLinkClick=function(e){e.preventDefault();var t=r.props.node,n=r.state.expanded;t.children&&t.children.length>0&&!n?r.setState({expanded:!n}):r.props.onLinkClick(t)},r.itemClick=function(){var e=r.props.node,t=r.state.expanded;e.children&&e.children.length>0&&r.setState({expanded:!t})},r.renderLink=function(e){var t=e.href,n=e.name,i=e.path,o=e.children,a=r.props.currentPath,s=R()("wiki-nav-content",{"no-children":!o||0===o.length,"wiki-nav-content-highlight":a===i});return t&&n?(0,J.jsx)("div",{className:s,children:(0,J.jsx)("a",{href:t,"data-path":i,onClick:r.onLinkClick,title:n,children:n})}):n?(0,J.jsx)("div",{className:s,onClick:r.itemClick,children:(0,J.jsx)("span",{title:n,children:n})}):null},r.state={expanded:!1},r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.node,r=this.state.expanded;return t.children.length>0?(0,J.jsxs)("div",{className:"pl-4 position-relative",children:[(0,J.jsx)("span",{className:"switch-btn",onClick:this.toggleExpanded,children:(0,J.jsx)("i",{className:"fa fa-caret-".concat(r?"down":"right")})}),this.renderLink(t),r&&t.children.map((function(t,r){return(0,J.jsx)(n,{node:t,currentPath:e.props.currentPath,onLinkClick:e.props.onLinkClick},r)}))]}):this.renderLink(t)}}]),n}(r.Component),Ie=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).onLinkClick=function(e){var t=r.state.currentPath;e.path!==t&&(e.path&&r.setState({currentPath:e.path}),e.href&&r.props.onLinkClick(e.href))},r.changeInlineNode=function(e){var t;if("link"==e.type||"image"===e.type)if("image"==e.type&&w.O6){if(t=e.data.src,!new RegExp(w.xx+"/lib/"+w.Jv+"/file.*raw=1").test(t))return;var n=t.indexOf("/file"),r=t.indexOf("?"),i=t.substring(n+5,r);e.data.src=w.xx+"/view-image-via-public-wiki/?slug="+w.oF+"&path="+i}else if("link"==e.type){t=e.url;if(new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/).test(t)){if(h.c.isInternalMarkdownLink(t,w.Jv)){var o=h.c.getPathFromInternalMarkdownLink(t,w.Jv);e.url=w.xx+"/published/"+w.oF+o}else if(h.c.isInternalDirLink(t,w.Jv)){var a=h.c.getPathFromInternalDirLink(t,w.Jv);e.url=w.xx+"/published/"+w.oF+a}}else t.startsWith("./")&&(t=t.slice(2)),e.url=w.xx+"/published/"+w.oF+"/"+t}return e},r.links=[],r.state={currentPath:"",treeRoot:{name:"",href:"",children:[],isRoot:!0}},r}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.indexContent,t=(0,we.mdStringToSlate)(e),n=h.c.changeMarkdownNodes(t,this.changeInlineNode),r=Ce(n);this.setState({treeRoot:r})}},{key:"render",value:function(){var e=this,t=this.state,n=t.treeRoot,r=t.currentPath;return(0,J.jsx)("div",{className:"mx-4 o-hidden",children:n.children.map((function(t){return(0,J.jsx)(Se,{node:t,currentPath:r,onLinkClick:e.onLinkClick},t.path)}))})}}]),n}(r.Component),je="folder",Ne="page",Oe=function(){function e(){(0,o.Z)(this,e)}return(0,a.Z)(e,null,[{key:"modifyFolder",value:function(e,t,n){var r=this;e.forEach((function(e){e.type===je&&r._modifyFolder(e,t,n)}))}},{key:"_modifyFolder",value:function(e,t,n){var r=this;if(e.id!==t)e.children.forEach((function(e){e.type===je&&r._modifyFolder(e,t,n)}));else for(var i in n)e[i]=n[i]}},{key:"deleteFolder",value:function(e,t,n){var r=this,i=this.getFolderIndexById(e,n);return i>-1?(this._deletePagesInFolder(t,e[i]),e.splice(i,1),!0):(e.forEach((function(e){if(e.type===je){var i=r.getFolderIndexById(e.children,n);if(i>-1){var o=e.children[i];return r._deletePagesInFolder(t,o),e.children.splice(i,1),!0}}})),!1)}},{key:"_deletePagesInFolder",value:function(e,t){var n=this;t.children.forEach((function(t){if(t.type===je&&n._deletePagesInFolder(e,t),t.type===Ne){var r=n.getPageIndexById(t.id,e);e.splice(r,1)}}))}},{key:"addPage",value:function(e,t,n){var r=this;n?e.forEach((function(e){e.type===je&&r._addPageInFolder(t,e,n)})):e.push({id:t,type:Ne})}},{key:"_addPageInFolder",value:function(e,t,n){var r=this;if(t.id===n)return t.children.push({id:e,type:Ne}),!0;t.children.forEach((function(t){t.type===je&&r._addPageInFolder(e,t,n)}))}},{key:"insertPage",value:function(e,t,n,r,i){var o=this;if(!r){var a=n?e.findIndex((function(e){return e.id===n})):-1;return a<0?(this.addPage(e,t,r),!0):("move_below"===i&&a++,void e.splice(a,0,{id:t,type:Ne}))}e.forEach((function(e){e.type===je&&o._insertPageIntoFolder(e,t,n,r,i)}))}},{key:"_insertPageIntoFolder",value:function(e,t,n,r,i){var o=this;if(e.id===r){var a=n?e.children.findIndex((function(e){return e.id===n})):-1;return"move_below"===i&&a++,void e.children.splice(a,0,{id:t,type:Ne})}e.children.forEach((function(e){e.type===je&&o._insertPageIntoFolder(e,t,n,r,i)}))}},{key:"insertPageOut",value:function(e,t,n,r){var i=this,o=0;"move_below"===r&&o++;var a={id:t,type:Ne},s=this.getFolderIndexById(e,n);s>-1?e.splice(s+o,0,a):e.forEach((function(e){if(e.type===je){var t=i.getFolderIndexById(e.children,n);t>-1&&e.children.splice(t+o,0,a)}}))}},{key:"deletePage",value:function(e,t){var n=this,r=e.findIndex((function(e){return e.id===t}));if(r>-1)return e.splice(r,1),!0;e.forEach((function(e){e.type===je&&n._deletePageInFolder(e,t)}))}},{key:"_deletePageInFolder",value:function(e,t){var n=this,r=e.children.findIndex((function(e){return e.id===t}));if(r>-1)return e.children.splice(r,1),!0;e.children.forEach((function(e){e.type===je&&n._deletePageInFolder(e,t)}))}},{key:"movePage",value:function(e,t,n,r,i,o){this.deletePage(e,t,r),this.insertPage(e,t,n,i,o)}},{key:"movePageOut",value:function(e,t,n,r,i){this.deletePage(e,t,n),this.insertPageOut(e,t,r,i)}}]),e}();Oe.getPageById=function(e,t){return t&&Array.isArray(e)&&e.find((function(e){return e.id===t}))||null},Oe.getPageFromNavigationById=function(e,t){if(!t||!Array.isArray(e))return null;var n=e.indexOf((function(e){return e.id===t}));if(n>-1)return e[n];for(var r=0;r<e.length;r++){var i=e[r];if(i.id===t)return i;if(Array.isArray(i.children))for(var o=0;o<i.children.length;o++)if(i.children[o].id===t)return i.children[o]}return null},Oe.getPageIndexById=function(e,t){return t.findIndex((function(t){return t.id===e}))},Oe.getFolderById=function(e,t){return t&&Array.isArray(e)?e.find((function(e){return e.type===je&&e.id===t})):null},Oe.getFolderIndexById=function(e,t){return t&&Array.isArray(e)?e.findIndex((function(e){return e.id===t})):-1};var Pe=n(74073),_e=n(54105),Te=n(85951),Ee=n(5684),Fe=n(93869),Me=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).onHotKey=function(e){13===e.keyCode&&(e.preventDefault(),r.handleSubmit())},r.handleChange=function(e){var t=r.state.folderName,n=e.target.value;n!==t&&r.setState({folderName:n})},r.handleSubmit=function(){var e=r.state,t=e.folderName,n=e.iconClassName;t?(r.props.onAddFolder({name:t,icon:n}),r.props.onToggleAddFolderDialog()):r.setState({errMessage:(0,w.ih)("Name_is_required")})},r.toggle=function(){r.props.onToggleAddFolderDialog()},r.onIconChange=function(e){r.setState({iconClassName:e})},r.state={folderName:"",errMessage:"",iconClassName:""},r}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onHotKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onHotKey)}},{key:"render",value:function(){var e=this,t=this.state,n=t.folderName,r=t.errMessage;return(0,J.jsxs)(p.Z,{isOpen:!0,toggle:this.toggle,autoFocus:!1,className:"new-folder-dialog",children:[(0,J.jsx)(ee.Z,{toggle:this.toggle,children:(0,w.ih)("New folder")}),(0,J.jsxs)(te.Z,{children:[(0,J.jsx)(Pe.Z,{children:(0,J.jsxs)(_e.Z,{children:[(0,J.jsx)(Te.Z,{for:"folderName",children:(0,w.ih)("Name")}),(0,J.jsx)(Ee.Z,{id:"folderName",value:n,innerRef:function(t){e.newInput=t},onChange:this.handleChange,autoFocus:!0})]})}),r&&(0,J.jsx)(Fe.Z,{color:"danger",className:"mt-2",children:r})]}),(0,J.jsxs)(ne.Z,{children:[(0,J.jsx)(re.Z,{color:"secondary",onClick:this.toggle,children:(0,w.ih)("Cancel")}),(0,J.jsx)(re.Z,{color:"primary",onClick:this.handleSubmit,children:(0,w.ih)("Submit")})]})]})}}]),n}(r.Component),Ze=n(4514),Re=n(32959),Le=n(62150),Ae=window.innerHeight-56,Ve=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).getOptions=function(){return[{value:"existing",label:(0,w.ih)("Select an existing file")},{value:".md",label:(0,w.ih)("Create a markdown file")},{value:".sdoc",label:(0,w.ih)("Create a sdoc file")}]},r.handleChange=function(e){var t=e.target.value;t!==r.state.pageName&&r.setState({pageName:t})},r.onFileNameChange=function(e){r.setState({newFileName:e.target.value})},r.toggle=function(){r.props.toggle()},r.onIconChange=function(e){r.setState({iconClassName:e})},r.onSubmit=function(){var e=r.state,t=e.iconClassName,n=e.selectedPath,i=e.selectedOption,o=r.state.pageName.trim();if(""!==o)if("existing"===i.value){if(!1===n.endsWith(".sdoc")&&!1===n.endsWith(".md"))return void N.Z.danger((0,w.ih)("Please select an existing sdoc or markdown file"));r.props.onAddNewPage({name:o,icon:t,path:n,successCallback:r.onSuccess,errorCallback:r.onError}),r.setState({isLoading:!0})}else{var a=r.state.newFileName.trim();if(""===a)return void N.Z.danger((0,w.ih)("New file name cannot be empty"));if(a.includes("/"))return void N.Z.danger((0,w.ih)("Name cannot contain slash"));if(a.includes("\\"))return void N.Z.danger((0,w.ih)("Name cannot contain backslash"));r.setState({isLoading:!0}),Ze.I.createFile(w.Jv,"".concat(n,"/").concat(a).concat(i.value)).then((function(e){var n=e.data,i=n.obj_name,a=n.parent_dir;r.props.onAddNewPage({name:o,icon:t,path:"/"===a?"/".concat(i):"".concat(a,"/").concat(i),successCallback:r.onSuccess,errorCallback:r.onError})})).catch((function(e){var t=h.c.getErrorMsg(e);N.Z.danger(t),r.onError()}))}else N.Z.danger((0,w.ih)("Page name cannot be empty"))},r.onSuccess=function(){r.toggle()},r.onError=function(){r.setState({isLoading:!1})},r.onDirentItemClick=function(e,t){r.setState({repo:e,selectedPath:t,errMessage:""})},r.onRepoItemClick=function(e){r.setState({repo:e,selectedPath:"/",errMessage:""})},r.handleSelectChange=function(e){r.setState({selectedOption:e,selectedPath:""})},r.options=r.getOptions(),r.state={pageName:"",iconClassName:"",isLoading:!1,repo:null,selectedPath:"",errMessage:"",newFileName:"",selectedOption:r.options[0]},r}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsxs)(p.Z,{isOpen:!0,toggle:this.toggle,autoFocus:!1,className:"add-page-dialog",style:{maxHeight:Ae},children:[(0,J.jsx)(ee.Z,{toggle:this.toggle,children:(0,w.ih)("Add page")}),(0,J.jsx)(te.Z,{className:"pr-4",children:(0,J.jsxs)(Pe.Z,{children:[(0,J.jsxs)(_e.Z,{children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("Page name")}),(0,J.jsx)(Ee.Z,{value:this.state.pageName,onChange:this.handleChange,autoFocus:!0})]}),(0,J.jsxs)(_e.Z,{children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("The file corresponding to this page")}),(0,J.jsx)(Re.ME,{value:this.state.selectedOption,options:this.options,onChange:this.handleSelectChange})]}),"existing"!==this.state.selectedOption.value&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(_e.Z,{children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("New file name")}),(0,J.jsx)(Ee.Z,{value:this.state.newFileName,onChange:this.onFileNameChange,autoFocus:!0})]}),(0,J.jsxs)(_e.Z,{children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("Select a directory to save new file")}),(0,J.jsx)(Le.Z,{isShowFile:!1,repoID:w.Jv,currentPath:this.state.selectedPath,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:"only_current_library",hideLibraryName:!0})]})]}),"existing"===this.state.selectedOption.value&&(0,J.jsxs)(_e.Z,{children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("Select an existing file")}),(0,J.jsx)(Le.Z,{isShowFile:!0,repoID:w.Jv,currentPath:this.state.selectedPath,onDirentItemClick:this.onDirentItemClick,onRepoItemClick:this.onRepoItemClick,mode:"only_current_library",hideLibraryName:!0})]})]})}),(0,J.jsxs)(ne.Z,{children:[(0,J.jsx)(re.Z,{color:"secondary",onClick:this.toggle,children:(0,w.ih)("Cancel")}),this.state.isLoading?(0,J.jsx)(re.Z,{color:"primary",disabled:!0,children:(0,J.jsx)(M.Z,{})}):(0,J.jsx)(re.Z,{color:"primary",onClick:this.onSubmit,children:(0,w.ih)("Submit")})]})]})}}]),n}(r.Component),Be=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(72*Math.random()));return n},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n={};function r(e){e&&(n[e.id]=!0,Array.isArray(e.children)&&e.children.forEach((function(e){r(e)})))}e.forEach((function(e){return r(e)}));for(var i=Be(t);n[i];)i=Be(t);return i},Ue=function(e,t){return t?"default"===t?"".concat(w.si,"img/wiki/default.png"):w.xx+"/lib/"+e+"/file/_Internal/Wiki/Icon/"+t+"?raw=1":null},He=(0,a.Z)((function e(t){(0,o.Z)(this,e),this.type="folder",this.id=t.id,this.name=t.name,this.icon=t.icon,this.children=t.children||[]})),Ge=(0,a.Z)((function e(t){(0,o.Z)(this,e),this.id=t.id,this.name=t.name,this.path=t.path,this.icon=t.icon})),ze="folder",qe=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).renderIndexView=function(){return(0,J.jsxs)("div",{className:"wiki-pages-container",children:[(0,J.jsx)("div",{style:{marginTop:"2px"}}),(0,J.jsx)(Ie,{indexContent:r.props.indexContent,onLinkClick:r.props.onLinkClick})]})},r.renderTreeView=function(){return(0,J.jsxs)("div",{className:"wiki-pages-container",children:[w.D8&&(0,J.jsx)(ve,{onToggleAddView:r.openAddPageDialog.bind((0,T.Z)(r),null),onToggleAddFolder:r.onToggleAddFolder}),r.state.isShowNewFolderDialog&&(0,J.jsx)(Me,{onAddFolder:r.addPageFolder,onToggleAddFolderDialog:r.onToggleAddFolder}),r.state.isShowAddPageDialog&&(0,J.jsx)(Ve,{toggle:r.closeAddPageDialog,onAddNewPage:r.onAddNewPage})]})},r.confirmDeletePage=function(e){var t=F()(r.props.config),n=t.pages,i=t.navigation,o=Oe.getPageIndexById(e,n);t.pages.splice(o,1),Oe.deletePage(i,e),r.props.saveWikiConfig(t),t.pages.length>0?r.props.setCurrentPage(t.pages[0].id):r.props.setCurrentPage("")},r.onAddNewPage=function(){var e=(0,_.Z)((0,P.Z)().mark((function e(t){var n,i,o,a,s,l,d,c,u;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,i=t.icon,o=t.path,a=t.successCallback,s=t.errorCallback,l=r.props.config,d=l.navigation,c=We(d),u=new Ge({id:c,name:n,icon:i,path:o}),r.addPage(u,a,s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.duplicatePage=function(){var e=(0,_.Z)((0,P.Z)().mark((function e(t,n,i){var o,a,s,l,d,c,u,f,p;return(0,P.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.props.config,a=t.name,s=t.from_page_id,l=o.navigation,d=o.pages,c=Oe.getPageById(d,s),u=We(l),f=(0,O.Z)((0,O.Z)({},c),{},{id:u,name:a}),p=new Ge((0,O.Z)({},f)),r.addPage(p,n,i);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.addPage=function(e,t,n){var i=r.props.config,o=i.navigation,a=e.id;i.pages.push(e),Oe.addPage(o,a,r.current_folder_id),i.navigation=o;r.props.saveWikiConfig(i,(function(){r.props.setCurrentPage(a,t),t()}),n)},r.onUpdatePage=function(e,t){if(""!==t.name){var n=r.props.config,i=n.pages,o=i.find((function(t){return t.id===e}));Object.assign(o,t),n.pages=i,r.props.saveWikiConfig(n)}else N.Z.danger((0,w.ih)("Page name cannot be empty"))},r.movePage=function(e){var t=e.moved_view_id,n=e.target_view_id,i=e.source_view_folder_id,o=e.target_view_folder_id,a=e.move_position,s=F()(r.props.config),l=s.navigation;Oe.movePage(l,t,n,i,o,a),s.navigation=l,r.props.saveWikiConfig(s)},r.movePageOut=function(e,t,n,i){var o=F()(r.props.config),a=o.navigation;Oe.movePageOut(a,e,t,n,i),o.navigation=a,r.props.saveWikiConfig(o)},r.addPageFolder=function(e,t){var n=r.props.config,i=n.navigation,o=We(i),a=new He((0,O.Z)({id:o},e));t?i.forEach((function(e){e.type===ze&&r._addFolder(e,a,t)})):n.navigation.push(a),r.props.saveWikiConfig(n)},r.onModifyFolder=function(e,t){var n=r.props.config,i=n.navigation;Oe.modifyFolder(i,e,t),n.navigation=i,r.props.saveWikiConfig(n)},r.onDeleteFolder=function(e){var t=r.props.config,n=t.navigation,i=t.pages;Oe.deleteFolder(n,i,e),t.navigation=n,r.props.saveWikiConfig(t)},r.onMoveFolder=function(e,t,n){var i,o=r.props.config,a=o.navigation,s=F()(a),l=Oe.getFolderIndexById(s,e);-1===l?s.forEach((function(t){t.type===ze&&(l=Oe.getFolderIndexById(t.children,e))>-1&&(i=t.children[l],t.children.splice(l,1))})):(i=s[l],s.splice(l,1));var d=0;"move_below"===n&&d++;var c=Oe.getFolderIndexById(s,t);-1===c?s.forEach((function(e){e.type===ze?(c=Oe.getFolderIndexById(e.children,t))>-1&&e.children.splice(c+d,0,i):s=a})):s.splice(c+d,0,i),o.navigation=s,r.props.saveWikiConfig(o)},r.moveFolderToFolder=function(e,t){var n=r.props.config,i=n.navigation,o=Oe.getFolderById(i,t);if(o){var a,s=Oe.getFolderIndexById(i,e);if(s>-1){if((a=Oe.getFolderById(i,e)).children.some((function(e){return e.type===ze})))return void N.Z.danger("Only_support_two_level_folders");o.children.push(a),i.splice(s,1)}else i.forEach((function(t){if(t.type===ze){var n=Oe.getFolderIndexById(t.children,e);n>-1&&(a=t.children[n],o.children.push(a),t.children.splice(n,1))}}));n.navigation=i,r.props.saveWikiConfig(n)}else N.Z.danger("Only_support_two_level_folders")},r.onToggleAddFolder=function(){r.setState({isShowNewFolderDialog:!r.state.isShowNewFolderDialog})},r.openAddPageDialog=function(e){r.current_folder_id=e,r.setState({isShowAddPageDialog:!0})},r.closeAddPageDialog=function(){r.current_folder_id=null,r.setState({isShowAddPageDialog:!1})},r.onSetFolderId=function(e){r.current_folder_id=e},r.renderFolderView=function(){var e=r.props.config,t=e.pages,n=e.navigation;return(0,J.jsxs)("div",{className:"wiki-pages-container",children:[(0,J.jsx)(ye,{isEditMode:w.D8,navigation:n,views:t,onToggleAddView:r.openAddPageDialog,onDeleteView:r.confirmDeletePage,onUpdatePage:r.onUpdatePage,onSelectView:r.props.setCurrentPage,onMoveView:r.movePage,movePageOut:r.movePageOut,onToggleAddFolder:r.onToggleAddFolder,onModifyFolder:r.onModifyFolder,onDeleteFolder:r.onDeleteFolder,onMoveFolder:r.onMoveFolder,moveFolderToFolder:r.moveFolderToFolder,onAddNewPage:r.onAddNewPage,duplicatePage:r.duplicatePage,onSetFolderId:r.onSetFolderId,currentPageId:r.props.currentPageId}),r.state.isShowNewFolderDialog&&(0,J.jsx)(Me,{onAddFolder:r.addPageFolder,onToggleAddFolderDialog:r.onToggleAddFolder}),r.state.isShowAddPageDialog&&(0,J.jsx)(Ve,{toggle:r.closeAddPageDialog,onAddNewPage:r.onAddNewPage})]})},r.renderContent=function(){var e,t=r.props,n=t.isLoading,i=t.indexNode,o=t.config;return n?(0,J.jsx)(M.Z,{}):i?r.renderIndexView():(e=o)&&Object.keys(e).length>0?r.renderFolderView():r.renderTreeView()},r.isNodeMenuShow=!1,r.state={isShowNewFolderDialog:!1,isShowAddPageDialog:!1},r}return(0,a.Z)(n,[{key:"_addFolder",value:function(e,t,n){var r=this;e.id!==n?e.children.forEach((function(e){e.type===ze&&r._addFolder(e,t,n)})):e.children.push(t)}},{key:"render",value:function(){var e=this.props.config,t=e.wiki_name,n=e.wiki_icon,r=Ue(w.Jv,n);return(0,J.jsxs)("div",{className:"side-panel wiki-side-panel ".concat(this.props.closeSideBar?"":"left-zero"),children:[(0,J.jsxs)("div",{className:"side-panel-top panel-top",children:[r&&(0,J.jsx)("img",{src:r,width:"32",height:"32",alt:"",className:"mr-2"}),(0,J.jsx)("h4",{className:"ml-0 mb-0",children:t||w.oF})]}),(0,J.jsxs)("div",{id:"side-nav",className:"wiki-side-nav",role:"navigation",children:[this.renderContent(),w.b6&&w.rd&&(0,J.jsx)("div",{className:"text-left p-2",children:(0,J.jsx)("a",{href:w.ze+"library/"+w.Jv+"/"+w.oF+"/",className:"text-dark text-decoration-underline",children:(0,w.ih)("Go to Library")})})]})]})}}]),n}(r.Component),Je=qe,Xe=n(88376),Ye=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).onMouseEnter=function(){r.setState({highlight:!0})},r.onMouseLeave=function(){r.setState({highlight:!1})},r.onContextMenu=function(e){e.preventDefault(),e.stopPropagation()},r.onDirentClick=function(e){e.preventDefault(),r.props.onDirentClick(r.props.dirent)},r.state={highlight:!1},r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.path,n=e.dirent,r=w.ze+"published"+h.c.joinPath(t,n.name),i=h.c.getDirentIcon(n);return h.c.isDesktop()?(0,J.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onContextMenu:this.onContextMenu,children:[(0,J.jsx)("td",{className:"text-center",children:(0,J.jsx)("img",{src:i,width:"24",alt:""})}),(0,J.jsx)("td",{className:"name",children:(0,J.jsx)("a",{href:r,onClick:this.onDirentClick,children:n.name})}),(0,J.jsx)("td",{children:n.size}),(0,J.jsx)("td",{children:n.mtime_relative})]}):(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{className:"text-center",children:(0,J.jsx)("img",{src:i,width:"24",alt:""})}),(0,J.jsxs)("td",{children:[(0,J.jsx)("a",{href:r,onClick:this.onDirentClick,children:n.name}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{className:"item-meta-info",children:n.size}),(0,J.jsx)("span",{className:"item-meta-info",children:n.mtime_relative})]})]})}}]),n}(r.Component),Ke=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=h.c.isDesktop();return(0,J.jsxs)("table",{className:"table-hover ".concat(t?"":"table-thead-hidden"),children:[(0,J.jsx)("thead",{children:t?(0,J.jsxs)("tr",{children:[(0,J.jsx)("th",{style:{width:"4%"}}),(0,J.jsx)("th",{style:{width:"66%"},children:(0,w.ih)("Name")}),(0,J.jsx)("th",{style:{width:"15%"},children:(0,w.ih)("Size")}),(0,J.jsx)("th",{style:{width:"15%"},children:(0,w.ih)("Last Update")})]}):(0,J.jsxs)("tr",{children:[(0,J.jsx)("th",{width:"12%"}),(0,J.jsx)("th",{width:"88%"})]})}),(0,J.jsx)("tbody",{children:0!==this.props.direntList.length&&this.props.direntList.map((function(t,n){return(0,J.jsx)(Ye,{path:e.props.path,dirent:t,onDirentClick:e.props.onDirentClick},n)}))})]})}}]),n}(r.Component),Qe=Ke,$e=n(49119),et=n(29619),tt=n(93190),nt=n(97204),rt=n(72970),it=n(12409),ot=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).changeInlineNode=function(e){var t,n,r=i.props.repoID;if("image"==e.type){if(t=e.data.src,new RegExp(w.xx+"/lib/"+r+"/file.*raw=1").test(t)){var o=t.indexOf("/file"),a=t.indexOf("?");n=t.substring(o+5,a)}else{if(!/^\.\.\/*/.test(t)&&!/^\.\/*/.test(t))return;var s=i.props.path,l=s.slice(0,s.lastIndexOf("/"))+"/"+t;n=h.c.pathNormalize(l)}e.data.src=w.xx+"/view-image-via-public-wiki/?slug="+w.oF+"&path="+n}else if("link"==e.type)if(t=e.url,h.c.isInternalFileLink(t,r))if(h.c.isInternalMarkdownLink(t,r)){var d=h.c.getPathFromInternalMarkdownLink(t,r);e.url=w.xx+"/published/"+w.oF+d}else e.url=t.replace(/(.*)lib\/([-0-9a-f]{36})\/file(.*)/g,(function(e,t,n,r){return"".concat(t,"d/").concat(w.lI,"/files/?p=").concat(r,"&dl=1")}));else if(h.c.isInternalDirLink(t,r)){var c=h.c.getPathFromInternalDirLink(t,r);e.url=w.xx+"/published/"+w.oF+c}return e},i.modifyValueBeforeRender=function(e){return h.c.changeMarkdownNodes(e,i.changeInlineNode)},i.renderMarkdown=function(){var e=i.props,t=e.isTOCShow,n=e.markdownContent;if(!n)return null;var o=JSON.parse(n);window.seafile||(window.seafile={serviceUrl:w.xx,username:w.b6,name:w.u2,avatarURL:w.UK,repoID:w.Jv,siteRoot:w.ze,assetsUrl:w.Qu});var a={document:o,showOutline:t,scrollRef:i.scrollRef};return(0,J.jsx)(rt.I18nextProvider,{i18n:it.Z,children:(0,J.jsx)(r.Suspense,{fallback:(0,J.jsx)(M.Z,{}),children:(0,J.jsx)(nt.UT,(0,O.Z)({},a))})})},i.scrollRef=r.createRef(),i}return(0,a.Z)(n,[{key:"render",value:function(){if(this.props.isFileLoading)return(0,J.jsx)(M.Z,{});var e=this.props,t=e.isWiki,n=e.containerClassName,r="wiki-page-container ".concat(void 0===n?"":n),i="wiki-page-content ".concat(t?"":NaN);return(0,J.jsx)("div",{ref:this.scrollRef,className:r,children:(0,J.jsxs)("div",{className:i,children:[this.props.children,this.renderMarkdown(),(0,J.jsxs)("p",{id:"wiki-page-last-modified",children:[(0,w.ih)("Last modified by")," ",this.props.latestContributor,", ",(0,J.jsx)("span",{children:this.props.lastModified})]})]})})}}]),n}(r.Component);ot.defaultProps={isWiki:!1,isTOCShow:!0};var at=ot,st=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onMenuClick=function(){e.props.onMenuClick()},e.onEditClick=function(t){t.preventDefault();var n=w.ze+"lib/"+w.Jv+"/file"+e.props.path+"?mode=edit";window.open(n)},e.onMainNavBarClick=function(t){var n=h.c.getEventData(t,"path");e.props.onMainNavBarClick(n)},e.renderNavPath=function(){var t=e.props.path.split("/"),n="";return t.map((function(i,o){return""===i?null:o===t.length-1?(0,J.jsxs)(r.Fragment,{children:[(0,J.jsx)("span",{className:"path-split",children:"/"}),(0,J.jsx)("span",{className:"path-file-name",children:i})]},o):(n+="/"+i,(0,J.jsxs)(r.Fragment,{children:[(0,J.jsx)("span",{className:"path-split",children:"/"}),(0,J.jsx)("a",{className:"path-link","data-path":n,onClick:e.onMainNavBarClick,children:i})]},o))}))},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props.onSearchedClick,t=(0,J.jsx)("div",{className:"message err-tip",children:(0,w.ih)("Folder does not exist.")}),n=this.props.pathExist&&!this.props.isDataLoading&&this.props.isViewFile;return(0,J.jsxs)("div",{className:"main-panel wiki-main-panel",style:{flex:w.D8?"1 0 76%":"1 0 80%"},children:[(0,J.jsx)("div",{className:"main-panel-hide hide",children:this.props.content}),(0,J.jsxs)("div",{className:"main-panel-north panel-top ".concat("rw"===this.props.permission?"border-left-show":""),children:[!w.b6&&(0,J.jsxs)(r.Fragment,{children:[(0,J.jsx)("div",{className:"cur-view-toolbar",children:(0,J.jsx)("span",{className:"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle",title:"Side Nav Menu",onClick:this.onMenuClick})}),(0,J.jsx)("div",{className:"common-toolbar",children:w._y&&(0,J.jsx)($e.Z,{isPublic:!0,repoID:w.Jv,onSearchedClick:e,placeholder:(0,w.ih)("Search files")})})]}),w.b6&&(0,J.jsxs)(r.Fragment,{children:[(0,J.jsxs)("div",{className:"cur-view-toolbar",children:[(0,J.jsx)("span",{className:"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle",title:"Side Nav Menu",onClick:this.onMenuClick}),"rw"==this.props.permission&&(h.c.isDesktop()?(0,J.jsx)("button",{className:"btn btn-secondary operation-item",title:(0,w.ih)("Edit"),onClick:this.onEditClick,children:(0,w.ih)("Edit")}):(0,J.jsx)("span",{className:"fa fa-pencil-alt mobile-toolbar-icon",title:(0,w.ih)("Edit"),onClick:this.onEditClick,style:{fontSize:"1.1rem"}}))]}),(0,J.jsxs)("div",{className:"common-toolbar",children:[w._y&&(0,J.jsx)($e.Z,{isPublic:!0,repoID:w.Jv,onSearchedClick:e,placeholder:(0,w.ih)("Search files")}),(0,J.jsx)(et.Z,{}),(0,J.jsx)(tt.Z,{})]})]})]}),(0,J.jsx)("div",{className:"main-panel-center",children:(0,J.jsxs)("div",{className:"cur-view-content ".concat(n?"o-hidden":""),children:[!this.props.pathExist&&t,this.props.pathExist&&this.props.isDataLoading&&(0,J.jsx)(M.Z,{}),n&&h.c.isMarkdownFile(this.props.path)&&(0,J.jsx)(Xe.Z,{isWiki:!0,path:this.props.path,repoID:w.Jv,markdownContent:this.props.content,isFileLoading:this.props.isDataLoading,lastModified:this.props.lastModified,latestContributor:this.props.latestContributor,onLinkClick:this.props.onLinkClick}),n&&h.c.isSdocFile(this.props.path)&&(0,J.jsx)(at,{isWiki:!0,path:this.props.path,repoID:w.Jv,markdownContent:this.props.content,isFileLoading:this.props.isDataLoading,lastModified:this.props.lastModified,latestContributor:this.props.latestContributor,onLinkClick:this.props.onLinkClick}),!this.props.isDataLoading&&!this.props.isViewFile&&(0,J.jsx)(Qe,{path:this.props.path,direntList:this.props.direntList,onDirentClick:this.props.onDirentClick})]})})]})}}]),n}(r.Component),lt=st,dt=n(63035),ct=n(53108),ut=n(21179),ft=n(73722),pt=n(86500),ht=n(39857),gt=["default"],vt=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).onClickIcon=function(){"default"===e.props.config.wiki_icon?e.props.updateConfig({wiki_icon:""}):e.props.updateConfig({wiki_icon:"default"}),e.props.onToggle()},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this;return(0,J.jsx)("div",{className:"app-settings-dialog-icons",children:(0,J.jsx)("div",{className:"d-flex flex-wrap",children:gt.map((function(t,n){return(0,J.jsx)("div",{onClick:function(n){e.onClickIcon(t,n)},className:"seafile-multicolor-icon-container ".concat(n<5?"top":""),children:(0,J.jsx)("img",{src:"".concat(w.si,"img/wiki/").concat(t,".png"),alt:""})},n)}))})})}}]),n}(r.Component),mt=vt,yt=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).openFileInput=function(){i.fileInput.current.click()},i.uploadFile=function(){if(i.fileInput.current.files.length){var e=i.fileInput.current.files[0];i.uploadLocalFile(e).then((function(e){var t=Object.assign({},i.props.config,{wiki_icon:e});i.props.updateConfig(t),i.props.onToggle(),i.setState({iconName:e})}))}},i.uploadLocalFile=function(e){var t=i.props.repoId,n="wiki-icon-image-"+Date.now().toString()+".png";return Ze.I.getFileServerUploadLink(t,"/").then((function(t){var r=t.data+"?ret-json=1",i=new File([e],n,{type:e.type}),o=new FormData;return o.append("parent_dir","/"),o.append("relative_path","_Internal/Wiki/Icon"),o.append("file",i),Ze.I.uploadImage(r,o)})).then((function(e){return n}))},i.state={iconName:i.props.config.wiki_icon},i.fileInput=r.createRef(),i}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.state.iconName,t=Ue(this.props.repoId,e);return t?(0,J.jsxs)("div",{className:"app-setting-dialog-icon",children:[(0,J.jsx)("img",{src:t,alt:"",width:128,height:128}),(0,J.jsx)("p",{className:"mt-2 mb-1 app-setting-dialog-icon-description",children:(0,w.ih)("Please select a png image within 5MB.")}),(0,J.jsx)("p",{className:"app-setting-dialog-icon-description",children:(0,w.ih)("Recommended size is 256x256 px.")}),(0,J.jsx)(re.Z,{color:"primary",outline:!0,size:"sm",onClick:this.openFileInput,children:(0,w.ih)("Change icon")}),(0,J.jsx)("input",{className:"d-none",type:"file",accept:"image/png",onChange:this.uploadFile,ref:this.fileInput})]}):(0,J.jsxs)("div",{className:"app-setting-dialog-icon mb-8",children:[(0,J.jsx)("p",{className:"mt-2 mb-1 app-setting-dialog-icon-description",children:(0,w.ih)("Please select a png image within 5MB.")}),(0,J.jsx)("p",{className:"app-setting-dialog-icon-description",children:(0,w.ih)("Recommended size is 256x256 px.")}),(0,J.jsx)(re.Z,{color:"primary",outline:!0,size:"sm",onClick:this.openFileInput,children:(0,w.ih)("Upload icon")}),(0,J.jsx)("input",{className:"d-none",type:"file",accept:"image/png",onChange:this.uploadFile,ref:this.fileInput})]})}}]),n}(r.Component),wt=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).toggle=function(e){r.state.activeTab!==e&&r.setState({activeTab:e})},r.onEnter=function(e){e.preventDefault(),r.props.onToggle()},r.renderContent=function(){var e=r.state.activeTab;return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("div",{className:"app-icon-settings-popover-nav",children:(0,J.jsxs)(dt.Z,{className:"w-100",children:[(0,J.jsx)(ct.Z,{className:"w-50",children:(0,J.jsx)(ut.Z,{className:"system"===e?"active w-100":"w-100",onClick:r.toggle.bind((0,T.Z)(r),"system"),children:(0,w.ih)("System icon")})}),(0,J.jsx)(ct.Z,{className:"w-50",children:(0,J.jsx)(ut.Z,{className:"custom"===e?"active w-100":"w-100",onClick:r.toggle.bind((0,T.Z)(r),"custom"),children:(0,w.ih)("Custom icon")})})]})}),(0,J.jsx)("div",{className:"app-icon-settings-popover-main",children:(0,J.jsxs)(ft.Z,{activeTab:e,children:[(0,J.jsx)(pt.Z,{tabId:"custom",children:(0,J.jsx)(yt,{onToggle:r.props.onToggle,config:r.props.config,updateConfig:r.props.updateConfig,repoId:r.props.repoId})}),(0,J.jsx)(pt.Z,{tabId:"system",children:(0,J.jsx)(mt,{onToggle:r.props.onToggle,config:r.props.config,updateConfig:r.props.updateConfig})})]})})]})},r.state={activeTab:"system"},r}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsx)(K.Z,{placement:"bottom-start",target:this.props.targetId,hideSeahubPopover:this.props.onToggle,hideSeahubPopoverWithEsc:this.props.onToggle,onEnter:this.onEnter,hideArrow:!0,popoverClassName:"dtable-icon-settings-popover",children:(0,J.jsx)(Y.Z,{className:"p-0",children:this.renderContent()})})}}]),n}(r.Component),bt=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).onIconPopoverToggle=function(){i.setState({isShowIconPopover:!i.state.isShowIconPopover})},i.onRenameIconToggle=function(){i.setState({isTooltipOpen:!i.state.isTooltipOpen})},i.state={isShowIconPopover:!1,isTooltipOpen:!1},i.renameRef=r.createRef(),i}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props.config.wiki_icon,t=Ue(this.props.repoId,e);return(0,J.jsxs)("div",{className:"app-settings-dialog-icon-color",children:[(0,J.jsxs)(_e.Z,{className:"app-settings-dialog-theme-color",children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("Wiki icon")}),(0,J.jsxs)("div",{className:"position-relative",children:[e?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("img",{src:t,width:60,height:60,alt:""}),(0,J.jsx)("div",{className:"theme-color-backdrop",onClick:this.onIconPopoverToggle,id:"app-settings-dialog-icon-backdrop",children:(0,J.jsx)("span",{className:"iconfont icon-edit",ref:this.renameRef,style:{color:"#fff",fontSize:"24px"}})})]}):(0,J.jsx)("div",{onClick:this.onIconPopoverToggle,id:"app-settings-dialog-icon-backdrop",children:(0,J.jsx)(re.Z,{onClick:this.onIconPopoverToggle,size:"sm",color:"primary",children:(0,w.ih)("Select icon")})}),(0,J.jsx)(ht.Z,{placement:"bottom",isOpen:this.state.isTooltipOpen,target:this.renameRef,toggle:this.onRenameIconToggle,children:(0,w.ih)("Change icon")})]})]}),this.state.isShowIconPopover&&(0,J.jsx)(wt,{onToggle:this.onIconPopoverToggle,targetId:"app-settings-dialog-icon-backdrop",config:this.props.config,updateConfig:this.props.updateConfig,repoId:this.props.repoId})]})}}]),n}(r.Component),xt=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).onChange=function(e){r.setState({name:e.target.value})},r.validateName=function(e){return""===(e=e.trim())?{isValid:!1,message:(0,w.ih)("Name is required")}:e.includes("/")?{isValid:!1,message:(0,w.ih)("Name cannot contain slash")}:e.includes("\\")?{isValid:!1,message:(0,w.ih)("Name cannot contain backslash")}:{isValid:!0,message:e}},r.onCommit=function(){var e=r.state.name,t=r.validateName(e),n=t.isValid,i=t.message;n?r.props.updateConfig({wiki_name:i}):N.Z.danger(i)},r.state={name:e.config.wiki_name||""},r}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.state.name;return(0,J.jsxs)("div",{className:"app-setting-dialog-name",children:[(0,J.jsx)(Te.Z,{children:(0,w.ih)("Wiki name")}),(0,J.jsxs)("div",{className:"d-flex",children:[(0,J.jsx)("input",{className:"form-control rename-area-input",type:"text",value:e,onChange:this.onChange}),(0,J.jsx)(re.Z,{className:"rename-area-submit",color:"primary ml-4",onClick:this.onCommit,children:(0,w.ih)("Submit")})]})]})}}]),n}(r.Component),Dt=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).toggle=function(e){i.state.activeTab!==e&&i.setState({activeTab:e})},i.renderContent=function(){var e=i.state.activeTab;return(0,J.jsxs)(r.Fragment,{children:[(0,J.jsx)("div",{className:"app-settings-dialog-side",children:(0,J.jsxs)(dt.Z,{pills:!0,vertical:!0,className:"w-100",children:[(0,J.jsx)(ct.Z,{children:(0,J.jsx)(ut.Z,{className:"Name"===e?"active":"",onClick:i.toggle.bind((0,T.Z)(i),"Name"),children:(0,w.ih)("Wiki name")})}),(0,J.jsx)(ct.Z,{children:(0,J.jsx)(ut.Z,{className:"Icon"===e?"active":"",onClick:i.toggle.bind((0,T.Z)(i),"Icon"),children:(0,w.ih)("Icons")})})]})}),(0,J.jsx)("div",{className:"app-settings-dialog-main",children:(0,J.jsxs)(ft.Z,{activeTab:e,children:[(0,J.jsx)(pt.Z,{tabId:"Icon",children:(0,J.jsx)(bt,{config:i.props.config,repoId:i.props.repoId,updateConfig:i.props.updateConfig})}),(0,J.jsx)(pt.Z,{tabId:"Name",children:(0,J.jsx)(xt,{config:i.props.config,updateConfig:i.props.updateConfig})})]})})]})},i.state={activeTab:"Name"},i}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsxs)(p.Z,{isOpen:!0,toggle:this.props.toggle,className:"app-settings-dialog",children:[(0,J.jsx)(ee.Z,{toggle:this.props.toggle,children:(0,w.ih)("Wiki settings")}),(0,J.jsx)(te.Z,{className:"app-settings-dialog-content",children:this.renderContent()})]})}}]),n}(r.Component),kt=n(29439);var Ct=function(e){var t=(0,r.useState)(!1),n=(0,kt.Z)(t,2),i=n[0],o=n[1],a=(0,r.useRef)(null);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("div",{className:"left-bar-button",ref:a,onClick:e.onClick,onMouseEnter:function(){a&&a.current&&(a.current.style.backgroundColor="#dedede")},onMouseLeave:function(){a&&a.current&&(a.current.style.backgroundColor="")},children:(0,J.jsx)(q.Z,{symbol:e.iconClass})}),(0,J.jsx)(ht.Z,{placement:"right",isOpen:i,target:a,toggle:function(){return o(!i)},hideArrow:!0,fade:!1,children:e.tipText})]})},St=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).openPreviewApp=function(){window.open(window.location.href.replace("/edit-wiki/","/published/"))},r.openAppSettingsDialog=function(){r.setState({isShowSettingsDialog:!0})},r.closeAppSettingsDialog=function(){r.setState({isShowSettingsDialog:!1})},r.state={isShowSettingsDialog:!1},r}return(0,a.Z)(n,[{key:"render",value:function(){return(0,J.jsxs)("div",{className:"seatable-app-universal-left-bar",children:[(0,J.jsx)(Ct,{onClick:this.openAppSettingsDialog,iconClass:"wiki-settings",tipText:(0,w.ih)("Settings")}),(0,J.jsx)(Ct,{onClick:this.openPreviewApp,iconClass:"wiki-preview",tipText:(0,w.ih)("Go to wiki page to preview")}),this.state.isShowSettingsDialog&&(0,J.jsx)(Dt,{toggle:this.closeAppSettingsDialog,config:this.props.config,repoId:this.props.repoId,updateConfig:this.props.updateConfig})]})}}]),n}(r.Component);n(54890),n(98391),n(53379);c().locale(w.KQ);var It=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).handlePath=function(){return w.D8?"edit-wiki/":"published/"},r.getWikiConfig=function(){k.getWikiConfig(w.oF).then((function(e){var t=e.data.wiki,n=t.wiki_config,i=t.repo_id;r.setState({config:new S(JSON.parse(n)||{}),isConfigLoading:!1,repoId:i})})).catch((function(e){var t=h.c.getErrorMsg(e);N.Z.danger(t),r.setState({isConfigLoading:!1})}))},r.saveWikiConfig=function(e,t,n){k.updateWikiConfig(w.oF,JSON.stringify(e)).then((function(n){r.setState({config:new S(e||{})}),t&&t()})).catch((function(e){var t=h.c.getErrorMsg(e);N.Z.danger(t),n&&n()}))},r.loadSidePanel=function(e){w.dP?r.loadIndexNode():(e="None"===w.zj||h.c.isSdocFile(e)?"/":e,r.loadNodeAndParentsByPath(e))},r.loadWikiData=function(e){if(r.pythonWrapper=document.getElementById("wiki-file-content"),"False"===w.zj&&h.c.isSdocFile(e))r.showDir("/");else if("False"!==w.zj)if(r.removePythonWrapper(),"True"!==w.zj)if("None"!==w.zj||"/home.md"!==e){if("None"===w.zj){r.setState({pathExist:!1});var t=w.ze+r.handlePath()+w.oF+h.c.encodePath(e);window.history.pushState({url:t,path:e},e,t)}}else r.showDir("/");else r.showDir(e);else r.setState({path:e})},r.loadIndexNode=function(){k.listWikiDir(w.oF,"/").then((function(e){var t=r.state.treeData;r.addFirstResponseListToNode(e.data.dirent_list,t.root);var n=t.getNodeByPath(r.indexPath);k.getWikiFileContent(w.oF,n.path).then((function(e){r.setState({treeData:t,indexNode:n,indexContent:e.data.content,isTreeDataLoading:!1})}))})).catch((function(){r.setState({isLoadFailed:!0})}))},r.showDir=function(e){r.removePythonWrapper(),r.loadDirentList(e);var t=w.ze+r.handlePath()+w.oF+h.c.encodePath(e);window.history.pushState({url:t,path:e},e,t)},r.showFile=function(e){r.setState({isDataLoading:!0,isViewFile:!0,path:e}),r.removePythonWrapper(),k.getWikiFileContent(w.oF,e).then((function(e){var t=e.data;r.setState({isDataLoading:!1,content:t.content,permission:t.permission,lastModified:c().unix(t.last_modified).fromNow(),latestContributor:t.latest_contributor})})).catch((function(e){var t=h.c.getErrorMsg(e);N.Z.danger(t)}));var t=window.location.hash,n="".concat(w.ze).concat(r.handlePath()).concat(w.oF).concat(h.c.encodePath(e)).concat(t);"/home.md"===e?window.history.replaceState({url:n,path:e},e,n):window.history.pushState({url:n,path:e},e,n)},r.loadDirentList=function(e){r.setState({isDataLoading:!0}),k.listWikiDir(w.oF,e).then((function(t){var n=t.data.dirent_list.map((function(e){return new C.Z(e)}));"/"===e&&(n=n.filter((function(e){if("dir"===e.type){var t=e.name.toLowerCase();return"drafts"!==t&&"images"!==t&&"downloads"!==t}return!0}))),n=h.c.sortDirents(n,"name","asc"),r.setState({path:e,isViewFile:!1,direntList:n,isDataLoading:!1})})).catch((function(){r.setState({isLoadFailed:!0})}))},r.loadTreeNodeByPath=function(e){var t=r.state.treeData.clone(),n=t.getNodeByPath(e);n.isLoaded?(t.getNodeByPath(n.parentNode.path).isExpanded=!0,r.setState({treeData:t,currentNode:n})):k.listWikiDir(w.oF,n.path).then((function(e){r.addResponseListToNode(e.data.dirent_list,n),t.getNodeByPath(n.parentNode.path).isExpanded=!0,r.setState({treeData:t,currentNode:n})}))},r.loadNodeAndParentsByPath=function(e){var t=r.state.treeData.clone();h.c.isMarkdownFile(e)&&(e=h.c.getDirName(e)),k.listWikiDir(w.oF,e,!0).then((function(e){for(var n=e.data.dirent_list,i={},o=0;o<n.length;o++){var a=n[o],s=a.parent_dir;i[s]||(i[s]=[]),i[s].push(a)}for(var l in i){var d=t.getNodeByPath(l);d.isLoaded||"/"!==d.path?d.isLoaded||r.addResponseListToNode(i[l],d):r.addFirstResponseListToNode(i[l],d)}r.setState({isTreeDataLoading:!1,treeData:t})})).catch((function(){r.setState({isLoadFailed:!0})}))},r.removePythonWrapper=function(){r.pythonWrapper&&(document.body.removeChild(r.pythonWrapper),r.pythonWrapper=null)},r.onConentLinkClick=function(e){e.preventDefault(),e.stopPropagation();var t="";if("A"!==e.target.tagName){for(var n=e.target.parentNode;"A"!==n.tagName;)n=n.parentNode;t=n.href}else t=e.target.href;r.onLinkClick(t)},r.onLinkClick=function(e){var t=e;if(h.c.isWikiInternalMarkdownLink(t,w.oF)){var n=h.c.getPathFromWikiInternalMarkdownLink(t,w.oF);r.showFile(n)}else if(h.c.isWikiInternalDirLink(t,w.oF)){var i=h.c.getPathFromWikiInternalDirLink(t,w.oF);r.showDir(i)}else window.location.href=t;r.state.closeSideBar||r.setState({closeSideBar:!0})},r.onpopstate=function(e){if(e.state&&e.state.path){var t=e.state.path;h.c.isMarkdownFile(t)?r.showFile(t):(r.loadDirentList(t),r.setState({path:t,isViewFile:!1}))}},r.onSearchedClick=function(e){var t=e.is_dir?e.path.slice(0,e.path.length-1):e.path;if(r.state.currentPath!==t){for(var n=-1,i=h.c.getPaths(t),o=0;o<i.length;o++){var a=r.state.treeData.getNodeByPath(a);if(!a){n=o;break}}if(-1===n){var s=r.state.treeData.clone(),l=s.getNodeByPath(e.path);j.Z.expandNode(l),r.setState({treeData:s})}else r.loadNodeAndParentsByPath(t);if(e.is_dir)r.showDir(t);else if(h.c.isMarkdownFile(t))r.showFile(t);else{var d=w.ze+"d/"+w.lI+"/files/?p="+h.c.encodePath(t);window.open("about:blank").location.href=d}}},r.onMenuClick=function(){r.setState({closeSideBar:!r.state.closeSideBar})},r.onMainNavBarClick=function(e){var t=r.state.treeData.clone(),n=t.getNodeByPath(e);t.expandNode(n),r.setState({treeData:t,currentNode:n}),r.showDir(n.path)},r.onDirentClick=function(e){var t=h.c.joinPath(r.state.path,e.name);if(e.isDir())r.loadTreeNodeByPath(t),r.showDir(t);else if(h.c.isMarkdownFile(t))r.showFile(t);else{var n=window.open("about:blank"),i=w.ze+"d/"+w.lI+"/files/?p="+h.c.encodePath(t);n.location.href=i}},r.onCloseSide=function(){r.setState({closeSideBar:!r.state.closeSideBar})},r.onNodeClick=function(e){if(r.state.pathExist||r.setState({pathExist:!0}),e.object.isDir()){if(!e.isLoaded){var t=r.state.treeData.clone();e=t.getNodeByPath(e.path),k.listWikiDir(w.oF,e.path).then((function(n){r.addResponseListToNode(n.data.dirent_list,e),t.collapseNode(e),r.setState({treeData:t})}))}if(e.path===r.state.path)if(e.isExpanded){var n=j.Z.collapseNode(r.state.treeData,e);r.setState({treeData:n})}else{var i=r.state.treeData.clone();e=i.getNodeByPath(e.path),i.expandNode(e),r.setState({treeData:i})}}if(e.path!==r.state.path)if(e.object.isDir())r.showDir(e.path);else if(h.c.isMarkdownFile(e.path)||h.c.isSdocFile(e.path))e.path!==r.state.path&&r.showFile(e.path),r.onCloseSide();else{var o=window.open("about:blank"),a=w.ze+"d/"+w.lI+"/files/?p="+h.c.encodePath(e.path);o.location.href=a}},r.onNodeCollapse=function(e){var t=j.Z.collapseNode(r.state.treeData,e);r.setState({treeData:t})},r.onNodeExpanded=function(e){var t=r.state.treeData.clone();(e=t.getNodeByPath(e.path)).isLoaded?(t.expandNode(e),r.setState({treeData:t})):k.listWikiDir(w.oF,e.path).then((function(n){r.addResponseListToNode(n.data.dirent_list,e),r.setState({treeData:t})}))},r.addFirstResponseListToNode=function(e,t){t.isLoaded=!0,t.isExpanded=!0;var n=e.map((function(e){return new C.Z(e)}));n=n.filter((function(e){if("dir"===e.type){var t=e.name.toLowerCase();return"drafts"!==t&&"images"!==t&&"downloads"!==t}return!0}));var r=(n=h.c.sortDirents(n,"name","asc")).map((function(e){return new I.Z({object:e})}));t.addChildren(r)},r.addResponseListToNode=function(e,t){t.isLoaded=!0,t.isExpanded=!0;var n=e.map((function(e){return new C.Z(e)})),r=(n=h.c.sortDirents(n,"name","asc")).map((function(e){return new I.Z({object:e})}));t.addChildren(r)},r.setCurrentPage=function(e,t){var n=r.state,i=n.currentPageId,o=n.config;if(e!==i){var a=o.pages,s=Oe.getPageById(a,e).path;if(h.c.isMarkdownFile(s)||h.c.isSdocFile(s))s!==r.state.path&&r.showFile(s),r.onCloseSide();else{var l=window.open("about:blank"),d=w.ze+"d/"+w.lI+"/files/?p="+h.c.encodePath(s);l.location.href=d}r.setState({currentPageId:e,path:s},(function(){t&&t()}))}else t&&t()},r.state={path:"",pathExist:!0,closeSideBar:!1,isViewFile:!0,isDataLoading:!1,direntList:[],content:"",permission:"",lastModified:"",latestContributor:"",isTreeDataLoading:!0,isConfigLoading:!0,treeData:j.Z.buildTree(),currentNode:null,indexNode:null,indexContent:"",currentPageId:"",config:{},repoId:""},window.onpopstate=r.onpopstate,r.indexPath="/index.md",r.homePath="/home.md",r.pythonWrapper=null,r}return(0,a.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){h.c.isDesktop()||this.setState({closeSideBar:!0})}},{key:"componentDidMount",value:function(){var e=this;this.getWikiConfig(),this.loadSidePanel(w.OG),this.loadWikiData(w.OG),this.links=document.querySelectorAll("#wiki-file-content a"),this.links.forEach((function(t){return t.addEventListener("click",e.onConentLinkClick)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.links.forEach((function(t){return t.removeEventListener("click",e.onConentLinkClick)}))}},{key:"render",value:function(){var e=this;return(0,J.jsxs)("div",{id:"main",className:"wiki-main",children:[w.D8&&(0,J.jsx)(St,{config:this.state.config,repoId:this.state.repoId,updateConfig:function(t){return e.saveWikiConfig(Object.assign({},e.state.config,t))}}),(0,J.jsx)(Je,{isLoading:this.state.isTreeDataLoading||this.state.isConfigLoading,closeSideBar:this.state.closeSideBar,currentPath:this.state.path,treeData:this.state.treeData,indexNode:this.state.indexNode,indexContent:this.state.indexContent,onCloseSide:this.onCloseSide,onNodeClick:this.onNodeClick,onNodeCollapse:this.onNodeCollapse,onNodeExpanded:this.onNodeExpanded,onLinkClick:this.onLinkClick,config:this.state.config,saveWikiConfig:this.saveWikiConfig,setCurrentPage:this.setCurrentPage,currentPageId:this.state.currentPageId}),(0,J.jsx)(lt,{path:this.state.path,pathExist:this.state.pathExist,isViewFile:this.state.isViewFile,isDataLoading:this.state.isDataLoading,content:this.state.content,permission:this.state.permission,lastModified:this.state.lastModified,latestContributor:this.state.latestContributor,direntList:this.state.direntList,onLinkClick:this.onLinkClick,onMenuClick:this.onMenuClick,onSearchedClick:this.onSearchedClick,onMainNavBarClick:this.onMainNavBarClick,onDirentClick:this.onDirentClick}),(0,J.jsx)(f(),{query:"(max-width: 767.8px)",children:(0,J.jsx)(p.Z,{isOpen:!this.state.closeSideBar,toggle:this.onCloseSide,contentClassName:"d-none"})})]})}}]),n}(r.Component);i.render((0,J.jsx)(It,{}),document.getElementById("wrapper"))},10116:function(e,t,n){"use strict";var r=n(89881),i=[],o=[],a=r.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function s(e){var t;(t=i.length?i.pop():new l).task=e,r(t)}function l(){this.task=null}e.exports=s,l.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(o.push(e),a())}finally{this.task=null,i[i.length]=this}}},89881:function(e,t,n){"use strict";function r(e){o.length||(i(),!0),o[o.length]=e}e.exports=r;var i,o=[],a=0;function s(){for(;a<o.length;){var e=a;if(a+=1,o[e].call(),a>1024){for(var t=0,n=o.length-a;t<n;t++)o[t]=o[t+a];o.length-=a,a=0}}o.length=0,a=0,!1}var l="undefined"!==typeof n.g?n.g:self,d=l.MutationObserver||l.WebKitMutationObserver;function c(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}i="function"===typeof d?function(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(s):c(s),r.requestFlush=i,r.makeRequestCallFromTimer=c},82823:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(21717),o=(r=i)&&r.__esModule?r:{default:r},a=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Array.isArray(n[0])&&1===n.length&&(n=n[0]);for(var i=0;i<n.length;i++)if(!o.default(n[i]))throw new Error("Expected a disposable");this.disposables=n,this.isDisposed=!1}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){if(this.isDisposed)return!1;var t=this.disposables.indexOf(e);return-1!==t&&(this.disposables.splice(t,1),e.dispose(),!0)},e.prototype.dispose=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.isDisposed=!0,this.disposables=[],this.length=0;for(n=0;n<e;n++)t[n].dispose()}},e}();t.default=a,e.exports=t.default},23840:function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){},i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isDisposed=!1,this.action=t||r}return n(e,null,[{key:"empty",value:{dispose:r},enumerable:!0}]),e.prototype.dispose=function(){this.isDisposed||(this.action.call(null),this.isDisposed=!0)},e}();t.default=i,e.exports=t.default},47493:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(21717),o=(r=i)&&r.__esModule?r:{default:r},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isDisposed=!1,this.current=null}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];if(null!=e&&!o.default(e))throw new Error("Expected either an empty value or a valid disposable");var t=this.isDisposed,n=void 0;t||(n=this.current,this.current=e),n&&n.dispose(),t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null,e&&e.dispose()}},e}();t.default=a,e.exports=t.default},13476:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(n(21717));t.isDisposable=i.default;var o=r(n(23840));t.Disposable=o.default;var a=r(n(82823));t.CompositeDisposable=a.default;var s=r(n(47493));t.SerialDisposable=s.default},21717:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return Boolean(e&&"function"===typeof e.dispose)},e.exports=t.default},7043:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(57195)),o=l(n(50598)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(93604)),s=l(n(96233));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(0,i.default)(o.default);this.context=n,this.store=r,this.monitor=new s.default(r),this.registry=this.monitor.registry,this.backend=t(this),r.subscribe(this.handleRefCountChange.bind(this))}return r(e,[{key:"handleRefCountChange",value:function(){var e=this.store.getState().refCount>0;e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1)}},{key:"getContext",value:function(){return this.context}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;return Object.keys(a).filter((function(e){return"function"===typeof a[e]})).reduce((function(n,r){var i,o=a[r];return n[r]=(i=o,function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=i.apply(e,r);"undefined"!==typeof a&&t(a)}),n}),{})}}]),e}();t.default=d},96233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(36993)),o=c(n(95585)),a=c(n(77795)),s=c(n(96745)),l=n(84706),d=n(65042);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=new s.default(t)}return r(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).handlerIds;(0,i.default)("function"===typeof e,"listener must be a function."),(0,i.default)("undefined"===typeof n||(0,o.default)(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe((function(){var i=t.store.getState(),o=i.stateId;try{o===r||o===r+1&&!(0,d.areDirty)(i.dirtyHandlerIds,n)||e()}finally{r=o}}))}},{key:"subscribeToOffsetChange",value:function(e){var t=this;(0,i.default)("function"===typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){var t=this.registry.getSource(e);return(0,i.default)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){var t=this.registry.getTarget(e);if((0,i.default)(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();return(0,a.default)(n,r)&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){var t=this.registry.getSource(e,!0);return(0,i.default)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(!(0,a.default)(n,r))return!1;var i=this.getTargetIds();if(!i.length)return!1;var o=i.indexOf(e);return t?o===i.length-1:o>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return(0,l.getSourceClientOffset)(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return(0,l.getDifferenceFromInitialOffset)(this.store.getState().dragOffset)}}]),e}();t.default=u},59908:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"canDrag",value:function(){return!0}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();t.default=r},97120:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"canDrop",value:function(){return!0}},{key:"hover",value:function(){}},{key:"drop",value:function(){}}]),e}();t.default=r},96745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(n(36993)),a=c(n(95585)),s=c(n(10116)),l=n(50577),d=c(n(64223));function c(e){return e&&e.__esModule?e:{default:e}}var u="SOURCE",f="TARGET";function p(e,t){t&&(0,a.default)(e)?e.forEach((function(e){return p(e,!1)})):(0,o.default)("string"===typeof e||"symbol"===("undefined"===typeof e?"undefined":i(e)),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function h(e){switch(e[0]){case"S":return u;case"T":return f;default:(0,o.default)(!1,"Cannot parse handler ID: "+e)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.types={},this.handlers={},this.pinnedSourceId=null,this.pinnedSource=null}return r(e,[{key:"addSource",value:function(e,t){p(e),function(e){(0,o.default)("function"===typeof e.canDrag,"Expected canDrag to be a function."),(0,o.default)("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),(0,o.default)("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(u,e,t);return this.store.dispatch((0,l.addSource)(n)),n}},{key:"addTarget",value:function(e,t){p(e,!0),function(e){(0,o.default)("function"===typeof e.canDrop,"Expected canDrop to be a function."),(0,o.default)("function"===typeof e.hover,"Expected hover to be a function."),(0,o.default)("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(f,e,t);return this.store.dispatch((0,l.addTarget)(n)),n}},{key:"addHandler",value:function(e,t,n){var r=function(e){var t=(0,d.default)().toString();switch(e){case u:return"S"+t;case f:return"T"+t;default:(0,o.default)(!1,"Unknown role: "+e)}}(e);return this.types[r]=t,this.handlers[r]=n,r}},{key:"containsHandler",value:function(e){var t=this;return Object.keys(this.handlers).some((function(n){return t.handlers[n]===e}))}},{key:"getSource",value:function(e,t){return(0,o.default)(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.handlers[e]}},{key:"getTarget",value:function(e){return(0,o.default)(this.isTargetId(e),"Expected a valid target ID."),this.handlers[e]}},{key:"getSourceType",value:function(e){return(0,o.default)(this.isSourceId(e),"Expected a valid source ID."),this.types[e]}},{key:"getTargetType",value:function(e){return(0,o.default)(this.isTargetId(e),"Expected a valid target ID."),this.types[e]}},{key:"isSourceId",value:function(e){return h(e)===u}},{key:"isTargetId",value:function(e){return h(e)===f}},{key:"removeSource",value:function(e){var t=this;(0,o.default)(this.getSource(e),"Expected an existing source."),this.store.dispatch((0,l.removeSource)(e)),(0,s.default)((function(){delete t.handlers[e],delete t.types[e]}))}},{key:"removeTarget",value:function(e){var t=this;(0,o.default)(this.getTarget(e),"Expected an existing target."),this.store.dispatch((0,l.removeTarget)(e)),(0,s.default)((function(){delete t.handlers[e],delete t.types[e]}))}},{key:"pinSource",value:function(e){var t=this.getSource(e);(0,o.default)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){(0,o.default)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}}]),e}();t.default=g},93604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.END_DRAG=t.DROP=t.HOVER=t.PUBLISH_DRAG_SOURCE=t.BEGIN_DRAG=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.beginDrag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0,clientOffset:null},n=t.publishSource,r=t.clientOffset,s=t.getSourceClientOffset;(0,i.default)((0,o.default)(e),"Expected sourceIds to be an array.");var l=this.getMonitor(),c=this.getRegistry();(0,i.default)(!l.isDragging(),"Cannot call beginDrag while dragging.");for(var u=0;u<e.length;u++)(0,i.default)(c.getSource(e[u]),"Expected sourceIds to be registered.");for(var f=null,p=e.length-1;p>=0;p--)if(l.canDragSource(e[p])){f=e[p];break}if(null===f)return;var h=null;r&&((0,i.default)("function"===typeof s,"When clientOffset is provided, getSourceClientOffset must be a function."),h=s(f));var g=c.getSource(f).beginDrag(l,f);(0,i.default)((0,a.default)(g),"Item must be an object."),c.pinSource(f);var v=c.getSourceType(f);return{type:d,itemType:v,item:g,sourceId:f,clientOffset:r,sourceClientOffset:h,isSourcePublic:n}},t.publishDragSource=function(){if(!this.getMonitor().isDragging())return;return{type:c}},t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clientOffset,r=void 0===n?null:n;(0,i.default)((0,o.default)(e),"Expected targetIds to be an array.");var a=e.slice(0),l=this.getMonitor(),d=this.getRegistry();(0,i.default)(l.isDragging(),"Cannot call hover while not dragging."),(0,i.default)(!l.didDrop(),"Cannot call hover after drop.");for(var c=0;c<a.length;c++){var f=a[c];(0,i.default)(a.lastIndexOf(f)===c,"Expected targetIds to be unique in the passed array.");var p=d.getTarget(f);(0,i.default)(p,"Expected targetIds to be registered.")}for(var h=l.getItemType(),g=a.length-1;g>=0;g--){var v=a[g],m=d.getTargetType(v);(0,s.default)(m,h)||a.splice(g,1)}for(var y=0;y<a.length;y++){var w=a[y];d.getTarget(w).hover(l,w)}return{type:u,targetIds:a,clientOffset:r}},t.drop=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getMonitor(),o=this.getRegistry();(0,i.default)(n.isDragging(),"Cannot call drop while not dragging."),(0,i.default)(!n.didDrop(),"Cannot call drop twice during one drag operation.");var s=n.getTargetIds().filter(n.canDropOnTarget,n);s.reverse(),s.forEach((function(s,l){var d=o.getTarget(s).drop(n,s);(0,i.default)("undefined"===typeof d||(0,a.default)(d),"Drop result must either be an object or undefined."),"undefined"===typeof d&&(d=0===l?{}:n.getDropResult()),e.store.dispatch({type:f,dropResult:r({},t,d)})}))},t.endDrag=function(){var e=this.getMonitor(),t=this.getRegistry();(0,i.default)(e.isDragging(),"Cannot call endDrag while not dragging.");var n=e.getSourceId();return t.getSource(n,true).endDrag(e,n),t.unpinSource(),{type:p}};var i=l(n(36993)),o=l(n(95585)),a=l(n(91845)),s=l(n(77795));function l(e){return e&&e.__esModule?e:{default:e}}var d=t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",c=t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",u=t.HOVER="dnd-core/HOVER",f=t.DROP="dnd-core/DROP",p=t.END_DRAG="dnd-core/END_DRAG"},50577:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSource=function(e){return{type:n,sourceId:e}},t.addTarget=function(e){return{type:r,targetId:e}},t.removeSource=function(e){return{type:i,sourceId:e}},t.removeTarget=function(e){return{type:o,targetId:e}};var n=t.ADD_SOURCE="dnd-core/ADD_SOURCE",r=t.ADD_TARGET="dnd-core/ADD_TARGET",i=t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",o=t.REMOVE_TARGET="dnd-core/REMOVE_TARGET"},19885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new s(e)};var i,o=n(8568),a=(i=o)&&i.__esModule?i:{default:i};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=t.getActions()}return r(e,[{key:"setup",value:function(){this.didCallSetup=!0}},{key:"teardown",value:function(){this.didCallTeardown=!0}},{key:"connectDragSource",value:function(){return a.default}},{key:"connectDragPreview",value:function(){return a.default}},{key:"connectDropTarget",value:function(){return a.default}},{key:"simulateBeginDrag",value:function(e,t){this.actions.beginDrag(e,t)}},{key:"simulatePublishDragSource",value:function(){this.actions.publishDragSource()}},{key:"simulateHover",value:function(e,t){this.actions.hover(e,t)}},{key:"simulateDrop",value:function(){this.actions.drop()}},{key:"simulateEndDrag",value:function(){this.actions.endDrag()}}]),e}()},67655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7043);Object.defineProperty(t,"DragDropManager",{enumerable:!0,get:function(){return s(r).default}});var i=n(59908);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return s(i).default}});var o=n(97120);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return s(o).default}});var a=n(19885);function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"createTestBackend",{enumerable:!0,get:function(){return s(a).default}})},65042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments[1],t=arguments[2];switch(e.type){case o.HOVER:break;case a.ADD_SOURCE:case a.ADD_TARGET:case a.REMOVE_TARGET:case a.REMOVE_SOURCE:return l;case o.BEGIN_DRAG:case o.PUBLISH_DRAG_SOURCE:case o.END_DRAG:case o.DROP:default:return d}var n=e.targetIds,i=t.targetIds,s=(0,r.default)(n,i),c=!1;if(0===s.length){for(var u=0;u<n.length;u++)if(n[u]!==i[u]){c=!0;break}}else c=!0;if(!c)return l;var f=i[i.length-1],p=n[n.length-1];f!==p&&(f&&s.push(f),p&&s.push(p));return s},t.areDirty=function(e,t){if(e===l)return!1;if(e===d||"undefined"===typeof t)return!0;return(0,i.default)(t,e).length>0};var r=s(n(38670)),i=s(n(74616)),o=n(93604),a=n(50577);function s(e){return e&&e.__esModule?e:{default:e}}var l=[],d=[]},84706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case i.BEGIN_DRAG:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case i.HOVER:return function(e,t){if(e===t)return!0;return e&&t&&e.x===t.x&&e.y===t.y}(e.clientOffset,t.clientOffset)?e:r({},e,{clientOffset:t.clientOffset});case i.END_DRAG:case i.DROP:return o;default:return e}},t.getSourceClientOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;if(!t||!n||!r)return null;return{x:t.x+r.x-n.x,y:t.y+r.y-n.y}},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset;if(!t||!n)return null;return{x:t.x-n.x,y:t.y-n.y}};var i=n(93604),o={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null}},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case s.BEGIN_DRAG:return r({},e,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case s.PUBLISH_DRAG_SOURCE:return r({},e,{isSourcePublic:!0});case s.HOVER:return r({},e,{targetIds:t.targetIds});case l.REMOVE_TARGET:return-1===e.targetIds.indexOf(t.targetId)?e:r({},e,{targetIds:(0,a.default)(e.targetIds,t.targetId)});case s.DROP:return r({},e,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case s.END_DRAG:return r({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}};var i,o=n(38587),a=(i=o)&&i.__esModule?i:{default:i},s=n(93604),l=n(50577);var d={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null}},50598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{dirtyHandlerIds:(0,a.default)(e.dirtyHandlerIds,t,e.dragOperation),dragOffset:(0,r.default)(e.dragOffset,t),refCount:(0,o.default)(e.refCount,t),dragOperation:(0,i.default)(e.dragOperation,t),stateId:(0,s.default)(e.stateId)}};var r=l(n(84706)),i=l(n(63)),o=l(n(59883)),a=l(n(65042)),s=l(n(90697));function l(e){return e&&e.__esModule?e:{default:e}}},59883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(arguments[1].type){case r.ADD_SOURCE:case r.ADD_TARGET:return e+1;case r.REMOVE_SOURCE:case r.REMOVE_TARGET:return e-1;default:return e}};var r=n(50577)},90697:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}},64223:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n++};var n=0},77795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,o.default)(e)?e.some((function(e){return e===t})):e===t};var r,i=n(95585),o=(r=i)&&r.__esModule?r:{default:r}},74521:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},81686:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},34405:function(e,t,n){var r=n(99038);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},86722:function(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},29131:function(e,t,n){var r=n(44526),i=n(34405),o=n(86722),a=n(95434),s=n(36902),l=n(88905);e.exports=function(e,t,n,d){var c=-1,u=i,f=!0,p=e.length,h=[],g=t.length;if(!p)return h;n&&(t=a(t,s(n))),d?(u=o,f=!1):t.length>=200&&(u=l,f=!1,t=new r(t));e:for(;++c<p;){var v=e[c],m=null==n?v:n(v);if(v=d||0!==v?v:0,f&&m===m){for(var y=g;y--;)if(t[y]===m)continue e;h.push(v)}else u(t,m,d)||h.push(v)}return h}},93527:function(e){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},23255:function(e,t,n){var r=n(45349),i=n(99798);e.exports=function e(t,n,o,a,s){var l=-1,d=t.length;for(o||(o=i),s||(s=[]);++l<d;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},99038:function(e,t,n){var r=n(93527),i=n(57700),o=n(13245);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},52382:function(e,t,n){var r=n(44526),i=n(34405),o=n(86722),a=n(95434),s=n(36902),l=n(88905),d=Math.min;e.exports=function(e,t,n){for(var c=n?o:i,u=e[0].length,f=e.length,p=f,h=Array(f),g=1/0,v=[];p--;){var m=e[p];p&&t&&(m=a(m,s(t))),g=d(m.length,g),h[p]=!n&&(t||u>=120&&m.length>=120)?new r(p&&m):void 0}m=e[0];var y=-1,w=h[0];e:for(;++y<u&&v.length<g;){var b=m[y],x=t?t(b):b;if(b=n||0!==b?b:0,!(w?l(w,x):c(v,x,n))){for(p=f;--p;){var D=h[p];if(!(D?l(D,x):c(e[p],x,n)))continue e}w&&w.push(x),v.push(b)}}return v}},57700:function(e){e.exports=function(e){return e!==e}},44409:function(e,t,n){var r=n(19908),i=n(25313),o=n(13457);e.exports=function(e,t){return o(i(e,t,r),e+"")}},43145:function(e,t,n){var r=n(83194),i=n(31438),o=n(19908),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},7579:function(e,t,n){var r=n(44526),i=n(34405),o=n(86722),a=n(88905),s=n(56946),l=n(73671);e.exports=function(e,t,n){var d=-1,c=i,u=e.length,f=!0,p=[],h=p;if(n)f=!1,c=o;else if(u>=200){var g=t?null:s(e);if(g)return l(g);f=!1,c=a,h=new r}else h=t?[]:p;e:for(;++d<u;){var v=e[d],m=t?t(v):v;if(v=n||0!==v?v:0,f&&m===m){for(var y=h.length;y--;)if(h[y]===m)continue e;t&&h.push(m),p.push(v)}else c(h,m,n)||(h!==p&&h.push(m),p.push(v))}return p}},63161:function(e,t,n){var r=n(29131),i=n(23255),o=n(7579);e.exports=function(e,t,n){var a=e.length;if(a<2)return a?o(e[0]):[];for(var s=-1,l=Array(a);++s<a;)for(var d=e[s],c=-1;++c<a;)c!=s&&(l[s]=r(l[s]||d,e[c],t,n));return o(i(l,1),t,n)}},90881:function(e,t,n){var r=n(79312);e.exports=function(e){return r(e)?e:[]}},56946:function(e,t,n){var r=n(4199),i=n(8568),o=n(73671),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},99798:function(e,t,n){var r=n(68624),i=n(52794),o=n(95585),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},73271:function(e,t,n){var r=n(83666),i=n(2114),o=n(30674),a=n(91845);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},25313:function(e,t,n){var r=n(81686),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var d=Array(t+1);++a<t;)d[a]=o[a];return d[t]=n(l),r(e,this,d)}}},13457:function(e,t,n){var r=n(43145),i=n(71639)(r);e.exports=i},71639:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},13245:function(e){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},83194:function(e){e.exports=function(e){return function(){return e}}},60979:function(e,t,n){var r=n(44409),i=n(83666),o=n(73271),a=n(67086),s=Object.prototype,l=s.hasOwnProperty,d=r((function(e,t){e=Object(e);var n=-1,r=t.length,d=r>2?t[2]:void 0;for(d&&o(t[0],t[1],d)&&(r=1);++n<r;)for(var c=t[n],u=a(c),f=-1,p=u.length;++f<p;){var h=u[f],g=e[h];(void 0===g||i(g,s[h])&&!l.call(e,h))&&(e[h]=c[h])}return e}));e.exports=d},74616:function(e,t,n){var r=n(95434),i=n(52382),o=n(44409),a=n(90881),s=o((function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=s},79312:function(e,t,n){var r=n(2114),i=n(89752);e.exports=function(e){return i(e)&&r(e)}},8568:function(e){e.exports=function(){}},35948:function(e,t,n){var r=n(23255),i=n(44409),o=n(7579),a=n(79312),s=i((function(e){return o(r(e,1,a,!0))}));e.exports=s},38587:function(e,t,n){var r=n(29131),i=n(44409),o=n(79312),a=i((function(e,t){return o(e)?r(e,t):[]}));e.exports=a},38670:function(e,t,n){var r=n(74951),i=n(44409),o=n(63161),a=n(79312),s=i((function(e){return o(r(e,a))}));e.exports=s},99312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=t.isFirefox=void 0;var r,i=n(92736),o=(r=i)&&r.__esModule?r:{default:r};t.isFirefox=(0,o.default)((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=(0,o.default)((function(){return Boolean(window.safari)}))},99846:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(35948)),o=a(n(38587));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[]}return r(e,[{key:"enter",value:function(e){var t=this.entered.length;return this.entered=(0,i.default)(this.entered.filter((function(t){return document.documentElement.contains(t)&&(!t.contains||t.contains(e))})),[e]),0===t&&this.entered.length>0}},{key:"leave",value:function(e){var t=this.entered.length;return this.entered=(0,o.default)(this.entered.filter((function(e){return document.documentElement.contains(e)})),e),t>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}]),e}();t.default=s},45766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(60979)),o=u(n(67857)),a=u(n(99846)),s=n(99312),l=n(34814),d=n(81060),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(42986));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.context=t.getContext(),this.sourcePreviewNodes={},this.sourcePreviewNodeOptions={},this.sourceNodes={},this.sourceNodeOptions={},this.enterLeaveCounter=new a.default,this.dragStartSourceIds=[],this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.getSourceClientOffset=this.getSourceClientOffset.bind(this),this.handleTopDragStart=this.handleTopDragStart.bind(this),this.handleTopDragStartCapture=this.handleTopDragStartCapture.bind(this),this.handleTopDragEndCapture=this.handleTopDragEndCapture.bind(this),this.handleTopDragEnter=this.handleTopDragEnter.bind(this),this.handleTopDragEnterCapture=this.handleTopDragEnterCapture.bind(this),this.handleTopDragLeaveCapture=this.handleTopDragLeaveCapture.bind(this),this.handleTopDragOver=this.handleTopDragOver.bind(this),this.handleTopDragOverCapture=this.handleTopDragOverCapture.bind(this),this.handleTopDrop=this.handleTopDrop.bind(this),this.handleTopDropCapture=this.handleTopDropCapture.bind(this),this.handleSelectStart=this.handleSelectStart.bind(this),this.endDragIfSourceWasRemovedFromDOM=this.endDragIfSourceWasRemovedFromDOM.bind(this),this.endDragNativeItem=this.endDragNativeItem.bind(this),this.asyncEndDragNativeItem=this.asyncEndDragNativeItem.bind(this),this.isNodeInDocument=this.isNodeInDocument.bind(this)}return r(e,[{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions[e]=n,this.sourcePreviewNodes[e]=t,function(){delete r.sourcePreviewNodes[e],delete r.sourcePreviewNodeOptions[e]}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes[e]=t,this.sourceNodeOptions[e]=n;var i=function(t){return r.handleDragStart(t,e)},o=function(t){return r.handleSelectStart(t,e)};return t.setAttribute("draggable",!0),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),function(){delete r.sourceNodes[e],delete r.sourceNodeOptions[e],t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable",!1)}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},i=function(t){return n.handleDragOver(t,e)},o=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions[e];return(0,i.default)(t||{},{dropEffect:this.altKeyPressed?"copy":"move"})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions[e];return(0,i.default)(t||{},{anchorX:.5,anchorY:.5,captureDraggingState:!1})}},{key:"getSourceClientOffset",value:function(e){return(0,l.getNodeClientOffset)(this.sourceNodes[e])}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(c).some((function(t){return c[t]===e}))}},{key:"beginDragNativeItem",value:function(e){this.clearCurrentDragSourceNode();var t=(0,d.createNativeDragSource)(e);this.currentNativeSource=new t,this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"asyncEndDragNativeItem",value:function(){this.asyncEndDragFrameId=this.window.requestAnimationFrame(this.endDragNativeItem)}},{key:"endDragNativeItem",value:function(){this.isDraggingNativeItem()&&(this.actions.endDrag(),this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)}},{key:"isNodeInDocument",value:function(e){return!(!document.body.contains(e)&&!this.window)&&this.window.document.body.contains(e)}},{key:"endDragIfSourceWasRemovedFromDOM",value:function(){var e=this.currentDragSourceNode;this.isNodeInDocument(e)||this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.currentDragSourceNodeOffset=(0,l.getNodeClientOffset)(e),this.currentDragSourceNodeOffsetChanged=!1;this.mouseMoveTimeoutTimer=setTimeout((function(){return t.mouseMoveTimeoutId=null,t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.window.clearTimeout(this.mouseMoveTimeoutTimer),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0),this.mouseMoveTimeoutTimer=null,!0)}},{key:"checkIfCurrentDragSourceRectChanged",value:function(){var e=this.currentDragSourceNode;return!!e&&(!!this.currentDragSourceNodeOffsetChanged||(this.currentDragSourceNodeOffsetChanged=!(0,o.default)((0,l.getNodeClientOffset)(e),this.currentDragSourceNodeOffset),this.currentDragSourceNodeOffsetChanged))}},{key:"handleTopDragStartCapture",value:function(){this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]}},{key:"handleDragStart",value:function(e,t){this.dragStartSourceIds.unshift(t)}},{key:"handleTopDragStart",value:function(e){var t=this,n=this.dragStartSourceIds;this.dragStartSourceIds=null;var r=(0,l.getEventClientOffset)(e);this.monitor.isDragging()&&this.actions.endDrag(),this.actions.beginDrag(n,{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});var i=e.dataTransfer,o=(0,d.matchNativeItemType)(i);if(this.monitor.isDragging()){if("function"===typeof i.setDragImage){var a=this.monitor.getSourceId(),s=this.sourceNodes[a],c=this.sourcePreviewNodes[a]||s,u=this.getCurrentSourcePreviewNodeOptions(),f={anchorX:u.anchorX,anchorY:u.anchorY},p={offsetX:u.offsetX,offsetY:u.offsetY},h=(0,l.getDragPreviewOffset)(s,c,r,f,p);i.setDragImage(c,h.x,h.y)}try{i.setData("application/json",{})}catch(g){}this.setCurrentDragSourceNode(e.target),this.getCurrentSourcePreviewNodeOptions().captureDraggingState?this.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}))}else if(o)this.beginDragNativeItem(o);else{if(!(i.types||e.target.hasAttribute&&e.target.hasAttribute("draggable")))return;e.preventDefault()}}},{key:"handleTopDragEndCapture",value:function(){this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"handleTopDragEnterCapture",value:function(e){if(this.dragEnterTargetIds=[],this.enterLeaveCounter.enter(e.target)&&!this.monitor.isDragging()){var t=e.dataTransfer,n=(0,d.matchNativeItemType)(t);n&&this.beginDragNativeItem(n)}}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleTopDragEnter",value:function(e){var t=this,n=this.dragEnterTargetIds;(this.dragEnterTargetIds=[],this.monitor.isDragging())&&(this.altKeyPressed=e.altKey,(0,s.isFirefox)()||this.actions.hover(n,{clientOffset:(0,l.getEventClientOffset)(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()))}},{key:"handleTopDragOverCapture",value:function(){this.dragOverTargetIds=[]}},{key:"handleDragOver",value:function(e,t){this.dragOverTargetIds.unshift(t)}},{key:"handleTopDragOver",value:function(e){var t=this,n=this.dragOverTargetIds;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer.dropEffect="none");this.altKeyPressed=e.altKey,this.actions.hover(n,{clientOffset:(0,l.getEventClientOffset)(e)}),n.some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()):this.isDraggingNativeItem()?(e.preventDefault(),e.dataTransfer.dropEffect="none"):this.checkIfCurrentDragSourceRectChanged()&&(e.preventDefault(),e.dataTransfer.dropEffect="move")}},{key:"handleTopDragLeaveCapture",value:function(e){this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&this.isDraggingNativeItem()&&this.endDragNativeItem()}},{key:"handleTopDropCapture",value:function(e){this.dropTargetIds=[],e.preventDefault(),this.isDraggingNativeItem()&&this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),this.enterLeaveCounter.reset()}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"handleTopDrop",value:function(e){var t=this.dropTargetIds;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:(0,l.getEventClientOffset)(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.endDragIfSourceWasRemovedFromDOM()}},{key:"handleSelectStart",value:function(e){var t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))}},{key:"window",get:function(){return this.context&&this.context.window?this.context.window:"undefined"!==typeof window?window:void 0}}]),e}();t.default=f},61866:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,i=[],o=0;o<r;o++)i.push(o);i.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var a=[],s=[],l=[],d=void 0,c=void 0,u=0;u<r-1;u++)d=t[u+1]-t[u],c=n[u+1]-n[u],s.push(d),a.push(c),l.push(c/d);for(var f=[l[0]],p=0;p<s.length-1;p++){var h=l[p],g=l[p+1];if(h*g<=0)f.push(0);else{d=s[p];var v=s[p+1],m=d+v;f.push(3*m/((m+v)/h+(m+d)/g))}}f.push(l[l.length-1]);for(var y=[],w=[],b=void 0,x=0;x<f.length-1;x++){b=l[x];var D=f[x],k=1/s[x],C=D+f[x+1]-b-b;y.push((b-D-C)*k),w.push(C*k*k)}this.xs=t,this.ys=n,this.c1s=f,this.c2s=y,this.c3s=w}return n(e,[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,i=this.c2s,o=this.c3s,a=t.length-1;if(e===t[a])return n[a];for(var s=0,l=o.length-1,d=void 0;s<=l;){var c=t[d=Math.floor(.5*(s+l))];if(c<e)s=d+1;else{if(!(c>e))return n[d];l=d-1}}var u=e-t[a=Math.max(0,l)],f=u*u;return n[a]+r[a]*u+i[a]*f+o[a]*u*f}}]),e}();t.default=r},81060:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createNativeDragSource=function(e){var t=l[e],n=t.exposeProperty,r=t.matchesTypes,o=t.getData;return function(){function e(){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.item=(t={},(r={})[n]=r[n]||{},r[n].get=function(){return console.warn("Browser doesn't allow reading \""+n+'" until the drop event.'),null},function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}}(t,r),t)}return i(e,[{key:"mutateItemByReadingDataTransfer",value:function(e){delete this.item[n],this.item[n]=o(e,r)}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}()},t.matchNativeItemType=function(e){var t=Array.prototype.slice.call(e.types||[]);return Object.keys(l).filter((function(e){return l[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(42986));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),null);return null!=r?r:n}var l=(a(r={},o.FILE,{exposeProperty:"files",matchesTypes:["Files"],getData:function(e){return Array.prototype.slice.call(e.files)}}),a(r,o.URL,{exposeProperty:"urls",matchesTypes:["Url","text/uri-list"],getData:function(e,t){return s(e,t,"").split("\n")}}),a(r,o.TEXT,{exposeProperty:"text",matchesTypes:["Text","text/plain"],getData:function(e,t){return s(e,t,"")}}),r)},42986:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},34814:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeClientOffset=l,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,n,r,o){var s=(x=t,"IMG"===x.nodeName&&((0,i.isFirefox)()||!document.documentElement.contains(x))),d=l(s?e:t),c={x:n.x-d.x,y:n.y-d.y},u=e.offsetWidth,f=e.offsetHeight,p=r.anchorX,h=r.anchorY,g=function(e,t,n,r){var o=e?t.width:n,a=e?t.height:r;(0,i.isSafari)()&&e&&(a/=window.devicePixelRatio,o/=window.devicePixelRatio);return{dragPreviewWidth:o,dragPreviewHeight:a}}(s,t,u,f),v=g.dragPreviewWidth,m=g.dragPreviewHeight,y=o.offsetX,w=o.offsetY,b=0===w||w;var x;return{x:0===y||y?y:new a.default([0,.5,1],[c.x,c.x/u*v,c.x+v-u]).interpolate(p),y:b?w:function(){var e=new a.default([0,.5,1],[c.y,c.y/f*m,c.y+m-f]).interpolate(h);return(0,i.isSafari)()&&s&&(e+=(window.devicePixelRatio-1)*m),e}()}};var r,i=n(99312),o=n(61866),a=(r=o)&&r.__esModule?r:{default:r};var s=1;function l(e){var t=e.nodeType===s?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}},45939:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){n||((n=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");return n};var n=void 0},96552:function(e,t,n){"use strict";t.ZP=function(e){return new r.default(e)};var r=o(n(45766)),i=o(n(45939));function o(e){return e&&e.__esModule?e:{default:e}}(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e})(n(42986)),i.default},67857:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o+=1){if(!i.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;if(e[n[o]]!==t[n[o]])return!1}return!0}},865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackBackendForEs5Users=t.createChildContext=t.CHILD_CONTEXT_TYPES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){f.default.apply(void 0,["DragDropContext","backend"].concat(Array.prototype.slice.call(arguments)));var t=v(e),n=g(t);return function(e){var t,o,l=e.displayName||e.name||"Component",d=(o=t=function(t){function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,t),i(o,[{key:"getDecoratedComponentInstance",value:function(){return(0,c.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"getManager",value:function(){return n.dragDropManager}},{key:"getChildContext",value:function(){return n}},{key:"render",value:function(){var t=this;return s.default.createElement(e,r({},this.props,{ref:function(e){t.child=e}}))}}]),o}(a.Component),t.DecoratedComponent=e,t.displayName="DragDropContext("+l+")",t.childContextTypes=h,o);return(0,u.default)(d,e)}};var a=n(47313),s=p(a),l=p(n(75192)),d=n(67655),c=p(n(36993)),u=p(n(48146)),f=p(n(36445));function p(e){return e&&e.__esModule?e:{default:e}}var h=t.CHILD_CONTEXT_TYPES={dragDropManager:l.default.object.isRequired},g=t.createChildContext=function(e,t){return{dragDropManager:new d.DragDropManager(e,t)}},v=t.unpackBackendForEs5Users=function(e){var t=e;return"object"===("undefined"===typeof t?"undefined":o(t))&&"function"===typeof t.default&&(t=t.default),(0,c.default)("function"===typeof t,"Expected the backend to be a function or an ES6 module exporting a default function. Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html"),t}},49520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(47313),l=n(75192),d=(o=l)&&o.__esModule?o:{default:o},c=n(865);var u=(i=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.backend=(0,c.unpackBackendForEs5Users)(e.backend),r.childContext=(0,c.createChildContext)(r.backend,{window:e&&e.window?e.window:n&&n.window?n.window:"undefined"!==typeof window?window:void 0}),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){if(e.backend!==this.props.backend||e.window!==this.props.window)throw new Error("DragDropContextProvider backend and window props must not change.")}},{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return s.Children.only(this.props.children)}}]),t}(s.Component),r.propTypes={backend:d.default.oneOfType([d.default.func,d.default.object]).isRequired,children:d.default.element.isRequired,window:d.default.object},r.defaultProps={window:void 0},r.childContextTypes=c.CHILD_CONTEXT_TYPES,r.displayName="DragDropContextProvider",r.contextTypes={window:d.default.object},i);t.default=u},46007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h.default.apply(void 0,["DragLayer","collect[, options]"].concat(Array.prototype.slice.call(arguments))),(0,u.default)("function"===typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html",e),(0,u.default)((0,c.default)(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html',t),function(n){var c,h,g=t.arePropsEqual,v=void 0===g?p.default:g,m=n.displayName||n.name||"Component",y=(h=c=function(t){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.manager=t.dragDropManager,(0,u.default)("object"===i(n.manager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",m,m),n.state=n.getCurrentState(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),o(a,[{key:"getDecoratedComponentInstance",value:function(){return(0,u.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"shouldComponentUpdate",value:function(e,t){return!v(e,this.props)||!(0,f.default)(t,this.state)}}]),o(a,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0;var e=this.manager.getMonitor();this.unsubscribeFromOffsetChange=e.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=e.subscribeToStateChange(this.handleChange),this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange(),this.unsubscribeFromStateChange()}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,f.default)(e,this.state)||this.setState(e)}}},{key:"getCurrentState",value:function(){var t=this.manager.getMonitor();return e(t,this.props)}},{key:"render",value:function(){var e=this;return s.default.createElement(n,r({},this.props,this.state,{ref:function(t){e.child=t}}))}}]),a}(a.Component),c.DecoratedComponent=n,c.displayName="DragLayer("+m+")",c.contextTypes={dragDropManager:l.default.object.isRequired},h);return(0,d.default)(y,n)}};var a=n(47313),s=g(a),l=g(n(75192)),d=g(n(48146)),c=g(n(40634)),u=g(n(36993)),f=g(n(34178)),p=g(n(45204)),h=g(n(36445));function g(e){return e&&e.__esModule?e:{default:e}}},61236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o.default.apply(void 0,["DragSource","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var p=e;"function"!==typeof e&&((0,r.default)((0,u.default)(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',e),p=function(){return e});(0,r.default)((0,i.default)(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',t);var h=(0,l.default)(t);return(0,r.default)("function"===typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),(0,r.default)((0,i.default)(f),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),function(e){return(0,a.default)({connectBackend:function(e,t){return e.connectDragSource(t)},containerDisplayName:"DragSource",createHandler:h,registerHandler:s.default,createMonitor:d.default,createConnector:c.default,DecoratedComponent:e,getType:p,collect:n,options:f})}};var r=f(n(36993)),i=f(n(40634)),o=f(n(36445)),a=f(n(96166)),s=f(n(96830)),l=f(n(83313)),d=f(n(30789)),c=f(n(72871)),u=f(n(96211));function f(e){return e&&e.__esModule?e:{default:e}}},28518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o.default.apply(void 0,["DropTarget","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var p=e;"function"!==typeof e&&((0,r.default)((0,u.default)(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',e),p=function(){return e});(0,r.default)((0,i.default)(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',t);var h=(0,l.default)(t);return(0,r.default)("function"===typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),(0,r.default)((0,i.default)(f),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),function(e){return(0,a.default)({connectBackend:function(e,t){return e.connectDropTarget(t)},containerDisplayName:"DropTarget",createHandler:h,registerHandler:s.default,createMonitor:d.default,createConnector:c.default,DecoratedComponent:e,getType:p,collect:n,options:f})}};var r=f(n(36993)),i=f(n(40634)),o=f(n(36445)),a=f(n(96166)),s=f(n(68983)),l=f(n(78351)),d=f(n(29437)),c=f(n(44154)),u=f(n(96211));function f(e){return e&&e.__esModule?e:{default:e}}},62238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t===e)return!0;return null!==t&&null!==e&&(0,o.default)(t,e)};var r,i=n(34178),o=(r=i)&&r.__esModule?r:{default:r}},72871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0,o=void 0,a=void 0,s=void 0,l=void 0,d=void 0;function c(){a&&(a(),a=null),t&&n&&(a=e.connectDragSource(t,n,o))}function u(){d&&(d(),d=null),t&&s&&(d=e.connectDragPreview(t,s,l))}return{receiveHandlerId:function(e){e!==t&&(t=e,c(),u())},hooks:(0,r.default)({dragSource:function(e,t){e===n&&(0,i.default)(t,o)||(n=e,o=t,c())},dragPreview:function(e,t){e===s&&(0,i.default)(t,l)||(s=e,l=t,u())}})}};var r=o(n(57442)),i=o(n(62238));function o(e){return e&&e.__esModule?e:{default:e}}},83313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){Object.keys(e).forEach((function(t){(0,i.default)(a.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',a.join(", "),t),(0,i.default)("function"===typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])})),s.forEach((function(t){(0,i.default)("function"===typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])}));var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrag",value:function(){return!e.canDrag||e.canDrag(this.props,this.monitor)}},{key:"isDragging",value:function(t,n){return e.isDragging?e.isDragging(this.props,this.monitor):n===t.getSourceId()}},{key:"beginDrag",value:function(){return e.beginDrag(this.props,this.monitor,this.component)}},{key:"endDrag",value:function(){e.endDrag&&e.endDrag(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var i=o(n(36993));o(n(40634));function o(e){return e&&e.__esModule?e:{default:e}}var a=["canDrag","beginDrag","isDragging","endDrag"],s=["beginDrag"]},30789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new d(e)};var i,o=n(36993),a=(i=o)&&i.__esModule?i:{default:i};var s=!1,l=!1,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalMonitor=t.getMonitor()}return r(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"canDrag",value:function(){(0,a.default)(!s,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return s=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{s=!1}}},{key:"isDragging",value:function(){(0,a.default)(!l,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return l=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{l=!1}}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},44154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=void 0,n=void 0,o=void 0,a=void 0;function s(){a&&(a(),a=null),t&&n&&(a=e.connectDropTarget(t,n,o))}return{receiveHandlerId:function(e){e!==t&&(t=e,s())},hooks:(0,r.default)({dropTarget:function(e,t){e===n&&(0,i.default)(t,o)||(n=e,o=t,s())}})}};var r=o(n(57442)),i=o(n(62238));function o(e){return e&&e.__esModule?e:{default:e}}},78351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){Object.keys(e).forEach((function(t){(0,i.default)(a.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',a.join(", "),t),(0,i.default)("function"===typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html",t,t,e[t])}));var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.monitor=e,this.props=null,this.component=null}return r(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrop",value:function(){return!e.canDrop||e.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){e.hover&&e.hover(this.props,this.monitor,this.component)}},{key:"drop",value:function(){if(e.drop)return e.drop(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}};var i=o(n(36993));o(n(40634));function o(e){return e&&e.__esModule?e:{default:e}}var a=["canDrop","hover","drop"]},29437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new l(e)};var i,o=n(36993),a=(i=o)&&i.__esModule?i:{default:i};var s=!1,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.internalMonitor=t.getMonitor()}return r(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"canDrop",value:function(){(0,a.default)(!s,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html");try{return s=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{s=!1}}},{key:"isOver",value:function(e){return this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},96166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t,n,h=e.DecoratedComponent,v=e.createHandler,m=e.createMonitor,y=e.createConnector,w=e.registerHandler,b=e.containerDisplayName,x=e.getType,D=e.collect,k=e.options.arePropsEqual,C=void 0===k?p.default:k,S=h.displayName||h.name||"Component",I=(n=t=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleChange=r.handleChange.bind(r),r.handleChildRef=r.handleChildRef.bind(r),(0,c.default)("object"===i(r.context.dragDropManager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",S,S),r.manager=r.context.dragDropManager,r.handlerMonitor=m(r.manager),r.handlerConnector=y(r.manager.getBackend()),r.handler=v(r.handlerMonitor),r.disposable=new d.SerialDisposable,r.receiveProps(e),r.state=r.getCurrentState(),r.dispose(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return this.decoratedComponentInstance}},{key:"shouldComponentUpdate",value:function(e,t){return!C(e,this.props)||!(0,f.default)(t,this.state)}}]),o(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.disposable=new d.SerialDisposable,this.currentType=null,this.receiveProps(this.props),this.handleChange()}},{key:"componentWillReceiveProps",value:function(e){C(e,this.props)||(this.receiveProps(e),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose(),this.isCurrentlyMounted=!1}},{key:"receiveProps",value:function(e){this.handler.receiveProps(e),this.receiveType(x(e))}},{key:"receiveType",value:function(e){if(e!==this.currentType){this.currentType=e;var t=w(e,this.handler,this.manager),n=t.handlerId,r=t.unregister;this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var i=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new d.CompositeDisposable(new d.Disposable(i),new d.Disposable(r)))}}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,f.default)(e,this.state)||this.setState(e)}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector.receiveHandlerId(null)}},{key:"handleChildRef",value:function(e){this.decoratedComponentInstance=e,this.handler.receiveComponent(e)}},{key:"getCurrentState",value:function(){return D(this.handlerConnector.hooks,this.handlerMonitor)}},{key:"render",value:function(){return s.default.createElement(h,r({},this.props,this.state,{ref:g(h)?this.handleChildRef:null}))}}]),t}(a.Component),t.DecoratedComponent=h,t.displayName=b+"("+S+")",t.contextTypes={dragDropManager:l.default.object.isRequired},n);return(0,u.default)(I,h)};var a=n(47313),s=h(a),l=h(n(75192)),d=n(13476),c=(h(n(40634)),h(n(36993))),u=h(n(48146)),f=h(n(34178)),p=h(n(45204));function h(e){return e&&e.__esModule?e:{default:e}}var g=function(e){return Boolean(e&&e.prototype&&"function"===typeof e.prototype.render)}},47584:function(e,t,n){"use strict";var r=n(865);Object.defineProperty(t,"Z5",{enumerable:!0,get:function(){return l(r).default}});var i=n(49520);var o=n(46007);Object.defineProperty(t,"rE",{enumerable:!0,get:function(){return l(o).default}});var a=n(61236);Object.defineProperty(t,"Ej",{enumerable:!0,get:function(){return l(a).default}});var s=n(28518);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"GR",{enumerable:!0,get:function(){return l(s).default}})},96830:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=n.getRegistry(),i=r.addSource(e,t);return{handlerId:i,unregister:function(){r.removeSource(i)}}}},68983:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=n.getRegistry(),i=r.addTarget(e,t);return{handlerId:i,unregister:function(){r.removeTarget(i)}}}},36445:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){0}},8178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.ref;if((0,o.default)("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),!n)return(0,a.cloneElement)(e,{ref:t});return(0,a.cloneElement)(e,{ref:function(e){t(e),n&&n(e)}})};var r,i=n(36993),o=(r=i)&&r.__esModule?r:{default:r},a=n(47313)},96211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){return"string"===typeof t||"symbol"===("undefined"===typeof t?"undefined":r(t))||n&&(0,a.default)(t)&&t.every((function(t){return e(t,!1)}))};var i,o=n(95585),a=(i=o)&&i.__esModule?i:{default:i}},34178:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o+=1){if(!i.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;if(e[n[o]]!==t[n[o]])return!1}return!0}},45204:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){if(e===t)return!0;if("object"!==("undefined"===typeof e?"undefined":n(e))||null===e||"object"!==("undefined"===typeof t?"undefined":n(t))||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var o=Object.prototype.hasOwnProperty,a=0;a<r.length;a+=1){if(!o.call(t,r[a]))return!1;var s=e[r[a]],l=t[r[a]];if(s!==l||"object"===("undefined"===typeof s?"undefined":n(s))||"object"===("undefined"===typeof l?"undefined":n(l)))return!1}return!0}},57442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return Object.keys(e).forEach((function(n){var r=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((0,i.isValidElement)(t)){var r=t;!function(e){if("string"===typeof e.type)return;var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}(r);var o=n?function(t){return e(t,n)}:e;return(0,a.default)(r,o)}e(t,n)}}(e[n]);t[n]=function(){return r}})),t};var r,i=n(47313),o=n(8178),a=(r=o)&&r.__esModule?r:{default:r}},48146:function(e){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r=Object.defineProperty,i=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,a=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,l=s&&s(Object);e.exports=function e(d,c,u){if("string"!==typeof c){if(l){var f=s(c);f&&f!==l&&e(d,f,u)}var p=i(c);o&&(p=p.concat(o(c)));for(var h=0;h<p.length;++h){var g=p[h];if(!t[g]&&!n[g]&&(!u||!u[g])){var v=a(c,g);try{r(d,g,v)}catch(m){}}}return d}return d}},57195:function(e,t,n){"use strict";t.__esModule=!0,t.ActionTypes=void 0,t.default=function e(t,n,o){var s;"function"===typeof n&&"undefined"===typeof o&&(o=n,n=void 0);if("undefined"!==typeof o){if("function"!==typeof o)throw new Error("Expected the enhancer to be a function.");return o(e)(t,n)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var l=t,d=n,c=[],u=c,f=!1;function p(){u===c&&(u=c.slice())}function h(){return d}function g(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=!0;return p(),u.push(e),function(){if(t){t=!1,p();var n=u.indexOf(e);u.splice(n,1)}}}function v(e){if(!(0,r.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,d=l(d,e)}finally{f=!1}for(var t=c=u,n=0;n<t.length;n++){(0,t[n])()}return e}return v({type:a.INIT}),(s={dispatch:v,subscribe:g,getState:h,replaceReducer:function(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,v({type:a.INIT})}})[i.default]=function(){var e,t=g;return(e={subscribe:function(e){if("object"!==typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[i.default]=function(){return this},e},s};var r=o(n(40634)),i=o(n(7357));function o(e){return e&&e.__esModule?e:{default:e}}var a=t.ActionTypes={INIT:"@@redux/INIT"}},7357:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),e=n.hmd(e);var r=function(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:e)}},function(e){e.O(0,[351],(function(){return t=12314,e(e.s=t);var t}));e.O()}]);